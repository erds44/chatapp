{"version":3,"sources":["components/websocket/Websocket.js","components/notification/index.js","components/login/login.js","helpers/color-user-helper.js","actions/type.js","components/room/report/constant.js","components/chat/chat-area/ChatMessage.js","helpers/util.js","components/chat/chat-area/ChatMessages.js","components/chat/chat-area/Compose.js","components/chat/chat-area/ChatArea.js","components/room/createRoom.js","components/room/joinedRoom.js","components/room/exitRoom.js","components/room/exitAllRooms.js","components/room/allRooms.js","components/room/report/reportForm.js","components/room/report/reportAdminForm.js","components/room/index.js","components/chat/userList/message.js","components/chat/userList/index.js","components/chat/inviteForm/index.js","components/chat/index.js","actions/index.js","auth/privateRoute.js","App.js","reportWebVitals.js","reducers/loginReducer.js","reducers/messageReducer.js","reducers/userListReducer.js","reducers/roomReducer.js","reducers/reportReducer.js","reducers/priMessageReducer.js","reducers/index.js","index.js"],"names":["webSocket","WebSocket","message","config","duration","maxCount","notification","info","text","content","success","error","warn","layout","labelCol","span","wrapperCol","validateMessages","required","connect","state","ownProps","logIn","login","props","history","useHistory","Option","Select","interests","schools","interest_string_list","school_string_list","dispatch","Form","useForm","form","i","validateFields","length","push","value","useEffect","console","log","isSignedIn","title","style","width","margin","headStyle","fontSize","backgroundColor","bodyStyle","name","onFinish","values","user","send","JSON","stringify","command","body","age","school","align","Item","label","QuestionCircleOutlined","rules","pattern","placeholder","min","max","textAlign","allowClear","mode","offset","type","htmlType","size","COLORS","copyCOLORS","COLOR_ASSIGNS","assignColors","id","color","shift","getAColor","SIGN_IN","SIGN_OUT","ON_MESSAGE","DELETE_MESSAGE","EDIT_MESSAGE","RECALL_MESSAGE","ROOM","JOIN_ROOM","ON_REPORT","PRI_MESSAGE","SETALLUSERS","EXIT_ROOM","reportReasons","BAN_BROADCAST","ChatMessage","onClickEdit","useDispatch","messageId","time","sender","isRecalled","recallTime","received","currentUser","useSelector","chatRoom","room","currentRoom","roomAdmin","userList","joinedRoom","indexOf","isOwnMessage","isAdmin","isAdminMessage","menu","onClick","event","key","payload","Date","getTime","getOperationsForMessage","map","operation","className","colorHelper","verticalAlign","gap","split","getDisplayName","onMouseEnter","dropDownElement","document","getElementById","visibility","opacity","onMouseLeave","moment","format","getRecallText","matchers","UrlMatcher","overlay","placement","messageCensor","toLowerCase","includes","TextArea","Input","ChatMessages","inputMessages","useState","modalVisible","setModalVisible","messageToEdit","setMessageToEdit","handleModalOK","editMessageTextArea","editedText","username","trim","source","handleClickEdit","visible","onOk","onCancel","rows","showCount","defaultValue","onPressEnter","Compose","textAreaText","setTextAreaText","handleMessageSend","preventDefault","sendMessage","uuid","showEmojiPicker","setshowEmojiPicker","set","perLine","include","onSelect","emoji","native","onChange","target","float","trigger","onVisibleChange","SmileOutlined","Content","Layout","Footer","ChatArea","Header","messages","CreateRoom","setVisible","interestDisabled","setInterestDisabled","interest","isPrivate","switch","outerWidth","valuePropName","prevState","disabled","PlusCircleOutlined","SubMenu","Menu","JoinedRoom","keyId","joinedRooms","userName","setReport","getRemoveButton","roomName","admin","marginLeft","ghost","shape","forceToLeave","reportRoom","reportName","getBlockButton","block","handleSelectedRoom","selectedKeys","defaultOpenKeys","GroupOutlined","index","onTitleClick","tag","ExitAllRooms","CloseCircleOutlined","AllRooms","allRooms","isPublic","e","LockOutlined","ReportForm","undefined","setValue","checkedReason","setCheckedReason","okButtonDisabled","setOkButtonDisabled","report","reportedUsername","reportedReason","reportedRoom","okButtonProps","Group","class","reportStore","isReportAdminVisible","okText","cancelText","setJoinedRooms","setUserList","setAllRooms","setUserName","setIsPublic","msg","Message","UserList","allUsers","allUserList","height","position","overflow","itemLayout","dataSource","renderItem","item","padding","Meta","avatar","description","rooms","selectedChatRoom","setName","inviteUserName","invitedRoom","Sider","priMsg","priMessage","data","drawer_visible","setDrawerVisible","exitDispatch","profile","find","myInterests","mes","handleReply","styles","paddingTop","feedback","notifications","theme","overflowY","overFlow","fontWeight","icon","UserOutlined","closable","onClose","minHeight","borderLeft","mesId","logInStore","Component","component","render","to","pathname","createBrowserHistory","onMessage","parse","section","request","param1","param2","param3","param4","param5","onopen","onmessage","onclose","Modal","path","exact","Login","Chat","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","INTIAL_STATE","INITIAL_STATE","substring","parseNestedList","list","v","start","end","ele","combineReducers","action","newChatRoomMessages","filter","m","newMessages","selectedRoom","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","ReactDOM"],"mappings":"sbAGeA,EADG,IAAIC,UAAU,+B,iBCAhCC,IAAQC,OAAO,CACbC,SAAU,EACVC,SAAU,IAGZ,IAeeC,EAfM,CACnBC,KAAM,SAACC,GACLN,IAAQK,KAAK,CAAEE,QAASD,GAAQ,IAElCE,QAAS,SAAAF,GACPN,IAAQQ,QAAQ,CAAED,QAASD,GAAQ,IAErCG,MAAO,SAAAH,GACLN,IAAQS,MAAM,CAAEF,QAASD,GAAQ,IAEnCI,KAAM,SAAAJ,GACJN,IAAQU,KAAK,CAAEH,QAASD,GAAQ,KCT9BK,EAAS,CACXC,SAAU,CAACC,KAAM,GACjBC,WAAY,CAACD,KAAM,KAGjBE,EAAmB,CACrBC,SAAU,yBAiHCC,eAJS,SAACC,EAAOC,GAC5B,MAAO,CAAEC,MAAOF,EAAMG,SAGc,GAAzBJ,EA9GD,SAACK,GAaX,IAXA,IAAMC,EAAUC,cACTC,EAAUC,IAAVD,OACDE,EAAY,GACZC,EAAU,GACVC,EAAuB,CAAC,YAAa,UAAW,QAAS,SAAU,SAAU,SAC7EC,EAAqB,CAAC,kBAAmB,kBAAmB,MAAO,OAAQ,sBAAuB,SACvFV,GAASE,EAAnBS,SAAmBT,EAATF,OARI,EASNY,IAAKC,UAAbC,EATc,oBAaZC,GAHgBD,EAAlBE,eAGM,GAAGD,EAAIL,EAAmBO,OAAQF,IAC3CP,EAAQU,KAAK,cAACb,EAAD,CAAQc,MAAOT,EAAmBK,GAAlC,SAAuCL,EAAmBK,MAG3E,IAAK,IAAIA,EAAI,EAAGA,EAAIN,EAAqBQ,OAAQF,IAC7CR,EAAUW,KAAK,cAACb,EAAD,CAAQc,MAAOV,EAAqBM,GAApC,SAAyCN,EAAqBM,MAgCjF,OAbAK,qBAAU,WACNC,QAAQC,IAAItB,GACTA,GAC0B,OAArBA,EAAMuB,cACmB,IAArBvB,EAAMuB,WACNpB,EAAQe,KAAK,SAEblC,EAAaK,MAAM,8DAIhC,CAACW,IAGA,cAAC,IAAD,CAAMwB,MAAM,kBAAkBC,MAAO,CAACC,MAAO,QAASC,OAAQ,aACxDC,UAAW,CAACC,SAAU,OAAQC,gBAAiB,WAC/CC,UAAW,CAACD,gBAAiB,WAFnC,SAGI,eAAC,IAAD,2BAAUvC,GAAV,IAAkByC,KAAK,YAAYlB,KAAMA,EAAMmB,SAjCtC,SAAAC,GACbb,QAAQC,IAAIY,EAAOC,MACnBzD,EAAU0D,KACNC,KAAKC,UAAU,CACXC,QAAS,QACTC,KAAM,CACFR,KAAME,EAAOC,KAAKH,KAClBS,IAAKP,EAAOC,KAAKM,IACjBC,OAAQR,EAAOC,KAAKO,OACpBnC,UAAW2B,EAAOC,KAAK5B,eAwBoCZ,iBAAkBA,EAAkBgD,MAAM,OAA7G,UACI,cAAC,IAAKC,KAAN,CACIZ,KAAM,CAAC,OAAQ,QACfa,MACI,4CAEI,cAAC,IAAD,CAASrB,MAAM,8CAAf,SACI,cAACsB,EAAA,EAAD,SAIZC,MAAO,CACH,CACInD,UAAU,EACVhB,QAAS,qBAEb,CACIoE,QAAS,uBACTpE,QAAS,+DAjBrB,SAoBI,cAAC,IAAD,CAAOqE,YAAY,gBAGvB,cAAC,IAAKL,KAAN,CAAWZ,KAAM,CAAC,OAAQ,OAAQa,MAAM,MAAME,MAAO,CAAC,CAACnD,UAAU,IAAjE,SACI,cAAC,IAAD,CAAasD,IAAK,EAAGC,IAAK,QAG9B,cAAC,IAAKP,KAAN,CAAWZ,KAAM,CAAC,OAAQ,UAAWa,MAAM,SAASE,MAAO,CAAC,CAACnD,UAAU,IAAvE,SACI,cAAC,IAAD,CAAQ6B,MAAO,CAACC,MAAO,OAAQ0B,UAAW,QAClCC,YAAU,EACVJ,YAAY,4BAFpB,SAEiDzC,MAGrD,cAAC,IAAKoC,KAAN,CAAWZ,KAAM,CAAC,OAAQ,aAAca,MAAM,YAAYE,MAAO,CAAC,CAACnD,UAAU,IAA7E,SACI,cAAC,IAAD,CAAQ0D,KAAK,WACLD,YAAU,EACV5B,MAAO,CAACC,MAAO,OAAQ0B,UAAW,QAClCH,YAAY,+BAHpB,SAGoD1C,MAGxD,cAAC,IAAKqC,KAAN,CAAWlD,WAAU,2BAAMH,EAAOG,YAAb,IAAyB6D,OAAQ,KAAtD,SACI,cAAC,IAAD,CAAQC,KAAK,UAAUC,SAAS,SAASC,KAAK,QAA9C,8B,6HC1FdC,G,OAAS,CAxBG,UAEJ,UACI,UACC,UACL,UAJQ,UAKT,UACI,UACJ,UACK,UACK,UACL,UACM,UACF,UACR,UACI,UACD,UACG,UACL,UACM,UACH,UACA,UACC,YA2BfC,EAAU,UACPD,GAcDE,EAAgB,GAOPC,EANM,SAACC,GAIlB,OAHKF,EAAcE,KACfF,EAAcE,GAdJ,WACd,IAAIC,EAAQJ,EAAWK,QAOvB,OANKD,IAIDA,GAHAJ,EAAU,UACHD,IAEYM,SAEhBD,EAMiBE,IAEjBL,EAAcE,ICrEZI,EAAU,UACVC,EAAW,WAEXC,EAAa,aACbC,EAAiB,iBACjBC,EAAe,eACfC,EAAiB,iBAEjBC,EAAO,OACPC,EAAY,YAEZC,EAAY,YAGZC,EAAc,cAGdC,GAAc,cACdC,GAAY,YClBZC,GAAgB,CAAC,iBAAkB,+BAAgC,sBACnEC,GAAgB,Y,oBC+LdC,GAhLK,SAAC,GAA8B,IAA5BrG,EAA2B,EAA3BA,QAASsG,EAAkB,EAAlBA,YACxBvE,EAAWwE,cAEXC,EAOFxG,EAPFmF,GACA7E,EAMEN,EANFM,KACAmG,EAKEzG,EALFyG,KACAC,EAIE1G,EAJF0G,OACAC,EAGE3G,EAHF2G,WACAC,EAEE5G,EAFF4G,WACAC,EACE7G,EADF6G,SAGIC,EAAcC,aAAY,SAAA7F,GAAK,OAAIA,EAAMG,MAAMkC,QAC/CyD,EAAWD,aAAY,SAAA7F,GAAK,OAAIA,EAAM+F,KAAKC,eAG3CC,GAFWJ,aAAY,SAAA7F,GAAK,OAAIA,EAAM+F,KAAKG,YAC/BL,aAAY,SAAA7F,GAAK,OAAIA,EAAM+F,QAC3BF,aAAY,SAAA7F,GAC5B,OAAKA,EAAM+F,KAAKG,UAAalG,EAAM+F,KAAKI,YAAenG,EAAM+F,KAAKG,SAASlG,EAAM+F,KAAKI,WAAWC,QAAQN,IAGlG9F,EAAM+F,KAAKG,SAASlG,EAAM+F,KAAKI,WAAWC,QAAQN,IAAW,GAF3D,SAILO,EAAeT,IAAgB9G,EAAQ0G,OACvCc,EAAUV,IAAgBK,EAC1BM,EAAiBf,IAAWS,EA4D5BO,EACJ,cAAC,IAAD,CAAMC,QAnDgB,SAAAC,GACtB,GAAKA,GAAUA,EAAMC,IAGrB,OAAQD,EAAMC,KACZ,IAAK,OACHvB,EAAYtG,GACZ,MAEF,IAAK,SACH+B,EAAS,CACP6C,KAAMc,EACNoC,QAAS,CACPtB,YACAQ,cAGJlH,EAAU0D,KACRC,KAAKC,UAAU,CACbC,QAAS,gBACTC,KAAM,CACJ4C,YACAQ,eAIN,MAEF,IAAK,SACHjF,EAAS,CACP6C,KAAMgB,EACNkC,QAAS,CACPtB,YACAQ,cAGJlH,EAAU0D,KACRC,KAAKC,UAAU,CACbC,QAAS,gBACTC,KAAM,CACJ4C,YACAQ,WACAJ,YAAY,IAAImB,MAAOC,gBASjC,SA5D8B,SAACR,EAASD,GACxC,OAAIA,EACK,CAAC,OAAQ,SAAU,UAExBC,EACK,CAAC,UAEH,GAsDJS,CAAwBT,EAASD,GAAcW,KAAI,SAAAC,GAClD,OAAO,cAAC,IAAKnE,KAAN,UAA4BmE,GAAZA,QAiC7B,OACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKtH,KAAM,EAAGuH,UAAU,mBAAxB,SACE,cAAC,IAAD,CACEvF,MAAO,CACLK,gBAAiBmF,EAAY3B,GAC7B4B,cAAe,UAEjBxD,KAAK,QACLyD,IAAK,EANP,SAbiB,SAAA7B,GACrB,OAAOA,EAAO8B,MAAM,KAAKN,KAAI,SAAA9E,GAAI,OAAIA,EAAK,MAoBnCqF,CAAe/B,OAGpB,cAAC,IAAD,CAAK7F,KAAM,GAAX,SACE,eAAC,IAAD,CACEuH,UAAS,iBAAK5B,QAAL,IAAKA,IAAa,GAAlB,oBACTkC,aA7CiB,WACvB,IAAMC,EAAkBC,SAASC,eAAT,UAA2BrC,EAA3B,cACnBmC,IAGLA,EAAgB9F,MAAMiG,WAAa,UACnCH,EAAgB9F,MAAMkG,QAAU,MAwC1BC,aArCiB,WACvB,IAAML,EAAkBC,SAASC,eAAT,UAA2BrC,EAA3B,cACnBmC,IAGLA,EAAgB9F,MAAMiG,WAAa,SACnCH,EAAgB9F,MAAMkG,QAAU,MA4B5B,UAKE,eAAC,IAAD,CAAKlI,KAAM,GAAX,UACE,eAAC,IAAD,CAAKuH,UAAU,iBAAf,UACE,eAAC,IAAD,CAAKA,UAAU,iBAAf,UACIb,EAAgB,KAASb,EAAQ,IAClCe,GAAkB,cAErB,eAAC,IAAD,CAAKW,UAAU,eAAf,WACIzB,GAAcsC,IAAOxC,GAAMyC,OAAO,uBACnCrC,GAAY,oBAGjB,cAAC,IAAD,UACE,cAAC,IAAD,CAAKuB,UAAU,eAAf,SACE,cAAC,KAAD,CACI7H,SAAWoG,GAAcrG,GAxCrB,SAACoG,EAAQE,GAC7B,MAAM,wCAAN,OAA+CqC,IAAOrC,GAAYsC,OAChE,gBADF,YAuCkDC,CAAczC,EAAQE,GACxDwC,SAAU,CAAC,IAAIC,KAAW,iBAKpC,cAAC,IAAD,CACExI,KAAM,EACNsE,GAAE,UAAKqB,EAAL,aACF4B,UAAW,mBAHb,UAKIzB,IAAeY,GAAgBC,IAC/B,cAAC,IAAD,CAAU8B,QAAS5B,EAAM6B,UAAU,aAAnC,SACE,cAAC,IAAD,+BCvLHC,I,OAAgB,SAACjJ,GAC1B,OAAQA,EAAQkJ,cAAcC,SAAS,UCQnCC,GAAaC,IAAbD,SA6EOE,GA3EM,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,cAChB/H,EAAWwE,cACXO,EAAcC,aAAY,SAAA7F,GAAK,OAAIA,EAAMG,MAAMkC,QAC/C2D,EAAcH,aAAY,SAAA7F,GAAK,OAAIA,EAAM+F,KAAKC,eAHV,EAIF6C,oBAAS,GAJP,mBAInCC,EAJmC,KAIrBC,EAJqB,OAKAF,mBAAS,IALT,mBAKnCG,EALmC,KAKpBC,EALoB,KAOpCC,EAAgB,WACpBH,GAAgB,GAChB,IAAMI,EAAsBzB,SAASC,eAAT,uBAE5B,GAAKW,GAAca,EAAoB9H,OAAvC,CAcA,IAAMuF,EAAU,CACdtB,UAAW0D,EAAc/E,GACzB6B,SAAUE,EACVoD,WAAYD,EAAoB9H,OAElCR,EAAS,CACP6C,KAAMe,EACNmC,YAEFhI,EAAU0D,KACRC,KAAKC,UAAU,CACbC,QAAS,cACTC,KAAMkE,UAzBRhI,EAAU0D,KACRC,KAAKC,UAAU,CACbC,QAAS,MACTC,KAAM,CACJ2G,SAAUzD,EAAY0D,OACtBvD,KAAMC,EAAYsD,OAClBC,OAAQrE,QAwBZsE,EAAkB,SAAA1K,GACtBmK,EAAiBnK,GACjBiK,GAAgB,IAGlB,OACE,0BAAS9E,GAAI,gBAAb,UACG2E,GACCA,EAAc5B,KAAI,SAAAlI,GAChB,OACE,cAAC,IAAD,CAAKoI,UAAU,UAAf,SACE,cAAC,GAAD,CAAapI,QAASA,EAASsG,YAAaoE,SAIpD,cAAC,IAAD,CACE9H,MAAM,eACN+H,QAASX,EACTY,KAAMR,EACNS,SAAU,kBAAMZ,GAAgB,IAJlC,SAME,cAAC,GAAD,CACE9E,GAAI,sBACJ2F,KAAM,EACNC,WAAW,EACXC,aAAY,OAAEd,QAAF,IAAEA,OAAF,EAAEA,EAAe5J,KAC7B2K,aAAcb,U,0DCjEhBT,GAAaC,IAAbD,SAqGOuB,GAlGC,WACd,IAAMnJ,EAAWwE,cACXO,EAAcC,aAAY,SAAA7F,GAAK,OAAIA,EAAMG,MAAMkC,QAC/C2D,EAAcH,aAAY,SAAA7F,GAAK,OAAIA,EAAM+F,KAAKC,eAHhC,EAIoB6C,mBAAS,IAJ7B,mBAIboB,EAJa,KAICC,EAJD,KAKdC,EAAoB,SAAAzD,GACxBA,EAAM0D,iBACDH,IAIA3B,GAAc2B,GAYjBI,IAXAzL,EAAU0D,KACRC,KAAKC,UAAU,CACbC,QAAS,MACTC,KAAM,CACJ2G,SAAUzD,EAAY0D,OACtBvD,KAAMC,EAAYsD,OAClBC,OAAQrE,OAQhBgF,EAAgB,MAMZG,EAAc,WAClB,IAAMzD,EAAU,CACdd,SAAUE,EACV5G,KAAM6K,EACNhG,GAAIqG,OACJ/E,MAAM,IAAIsB,MAAOC,UACjBtB,OAAQI,GAEV/E,EAAS,CACP6C,KAAMa,EACNqC,QAAQ,2BACHA,GADE,IAELjB,UAAU,MAGd/G,EAAU0D,KACRC,KAAKC,UAAU,CACbC,QAAS,YACTC,KAAMkE,MAlDQ,EAuD0BiC,oBAAS,GAvDnC,mBAuDb0B,EAvDa,KAuDIC,EAvDJ,KAiEdnL,EACA,cAAC,KAAD,CAAQoL,IAAM,UAAUC,QAAW,GAAIC,QAAW,CAAC,UAAU,UAAWC,SALzD,SAACC,GACpBX,EAAgBD,EAAeY,EAAMC,WAOvC,OACE,sBAAK7G,GAAI,UAAT,UACE,cAAC,IAAD,UACE,cAAC,GAAD,CACEV,YAAY,EACZU,GAAI,mBACJ2F,KAAM,EAENvI,MAAO4I,EACPJ,WAAW,EACXE,aAAcI,EACdY,SApDoB,SAAArE,GAC1BwD,EAAgBxD,EAAMsE,OAAO3J,YAsD3B,eAAC,IAAD,CAAOM,MAAS,CAACsJ,MAAM,SAAvB,UACE,cAAC,KAAD,CAAS5L,QAASA,EAAU6L,QAAQ,QAC3BzB,QAASc,EACTY,gBA7BW,WACxBX,GAAoBD,IA0BhB,SAIE,cAAC,IAAD,UAAS,cAACa,GAAA,EAAD,QAET,cAAC,IAAD,CAAQ3E,QAAS0D,EAAjB,yBCpGFkB,I,OAA4BC,IAA5BD,SAASE,GAAmBD,IAAnBC,OAqBFC,IArBqBF,IAAXG,OAER,SAAC,GAAkB,IAAhB3F,EAAe,EAAfA,SACZ4F,EAAW7F,aAAY,SAAA7F,GAC3B,OAAOA,EAAMlB,QAAQ4M,YAGvB,OACE,qBAAKzH,GAAI,YAAT,SACE,eAAC,IAAD,WACE,cAACoH,GAAD,UACE,cAAC,GAAD,CAAczC,cAAe8C,EAAS5F,OAExC,cAACyF,GAAD,UACE,cAAC,GAAD,a,oBChBJ9L,GAAS,CACXC,SAAU,CACNC,KAAM,GAEVC,WAAY,CACRD,KAAM,KAGRE,GAAmB,CACrBC,SAAU,yBA2EC6L,GAxEI,SAACvL,GAMhB,IALA,IAAMK,EAAY,GACZE,EAAuB,CAAC,YAAa,UAAW,QAAS,SAAU,SAAU,SAC5EJ,EAAUC,IAAVD,OACAkJ,EAAuBrJ,EAAvBqJ,QAASmC,EAAcxL,EAAdwL,WAJU,EAKsB/C,oBAAS,GAL/B,mBAKnBgD,EALmB,KAKDC,EALC,KAMjB7K,EAAI,EAAGA,EAAI,EAAGA,IACnBR,EAAUW,KAAK,cAACb,EAAD,CAAQc,MAAOV,EAAqBM,GAApC,SAAyCN,EAAqBM,MAoBjF,OACI,eAAC,KAAD,CAASoH,UAAU,WAAW3G,MAAO,cAC5BrC,QAAS,eAAC,IAAD,2BAAUI,IAAV,IAAkByC,KAAK,gBAAgBC,SApB5C,SAACC,GACdxD,EAAU0D,KACNC,KAAKC,UAAU,CACPC,QAAS,aACTC,KAAM,CACFR,KAAME,EAAOF,KACbzB,UAAW2B,EAAO2J,SAClBC,UAAW5J,EAAO6J,SAAU,MAK5CL,GAAW,IAQkE/L,iBAAkBA,GACvE8B,MAAO,CAACuK,WAAY,OAD1B,UAEL,cAAC,IAAKpJ,KAAN,CAAWZ,KAAM,OACNa,MAAM,OACNE,MAAO,CACH,CACInD,UAAU,EACVhB,QAAS,qBAEb,CACIoE,QAAS,uBACTpE,QAAS,+DAT5B,SAWc,cAAC,IAAD,MAEd,cAAC,IAAKgE,KAAN,CAAWZ,KAAK,SAASa,MAAM,UAAUoJ,cAAc,UAAvD,SAAiE,cAAC,KAAD,CAAQ1F,QAAS,WAC9EqF,GAAoB,SAAAM,GAAS,OAAKA,UAGtC,cAAC,IAAKtJ,KAAN,CAAWZ,KAAM,WACNa,MAAM,YACNE,MAAO,CAAC,CAACnD,UAAW+L,IAF/B,SAGI,cAAC,IAAD,CAAQrI,KAAK,WACLD,YAAU,EACV5B,MAAO,CAACC,MAAO,QACfuB,YAAY,gBACZkJ,SAAUR,EAJlB,SAIqCpL,MAGzC,cAAC,IAAKqC,KAAN,CAAWlD,WAAU,2BAAMH,GAAOG,YAAb,IAAyB6D,OAAQ,IAAtD,SACI,cAAC,IAAD,CAAQC,KAAK,UAAUC,SAAS,SAAhC,0BAKRuH,QAAQ,QACRzB,QAASA,EACT0B,gBA1Ce,SAAA1B,GACxBmC,EAAWnC,IAGX,UAuCI,+BAAM,cAAC6C,GAAA,EAAD,MAvCV,a,oBCrCDC,GAAWC,IAAXD,QAsFQE,GArFI,SAACrM,GAChB,IAAIsM,EAAQ,EACN7L,EAAWwE,cACVsH,EAA8CvM,EAA9CuM,YAAazG,EAAiC9F,EAAjC8F,SAAU0G,EAAuBxM,EAAvBwM,SAAUC,EAAazM,EAAbyM,UA8BlCC,EAAkB,SAAC5K,EAAM6K,EAAUC,GACrC,OAAI9K,IAAS0K,GAAY1K,IAAS8K,EAAc,KAC5CJ,IAAaI,EAAe,cAAC,IAAD,CAAStL,MAAM,SAAf,SAAwB,cAAC,IAAD,CAAQC,MAAO,CAACsL,WAAY,OAAQC,MAAQ,OAAOtJ,KAAO,QAAwCF,KAAK,UAAUyJ,MAAM,SAC/G1G,QAAS,kBA7BxD,SAACvE,EAAM6D,GACxBnH,EAAU0D,KACNC,KAAKC,UAAU,CACPC,QAAS,eACTC,KAAM,CACFkK,SAAU1K,EACV6K,SAAUhH,MAuBqDqH,CAAalL,EAAM6K,IAD1C,cAAuE7K,EAAO,SAAWwK,OAEzI,cAAC,IAAD,CAAShL,MAAM,SAAf,SAAwB,cAAC,IAAD,CAASC,MAAO,CAACsL,WAAY,OAAQC,MAAQ,OAAOtJ,KAAO,QAAQF,KAAK,UAAWyJ,MAAM,SAAyC1G,QAAS,WAhC3KoG,EAAU,CAACpD,SAAS,EAAM4D,WAiCfN,EAjCuCO,WAiC7BpL,KADW,cAAuGA,EAAO,SAAWwK,QAKvJa,EAAiB,SAACrL,GACpB,OAAIA,IAAS0K,EAAgB,eAAC,IAAD,CAASlL,MAAM,QAAf,cAAwB,cAAC,IAAD,CAAQwL,MAAQ,OAAOtJ,KAAO,QAAQF,KAAK,UAAUyJ,MAAM,SAC1E1G,QAAS,kBAxBrC,SAACvE,GACXtD,EAAU0D,KACNC,KAAKC,UAAU,CACPC,QAAS,QACTC,KAAM,CACFkK,SAAU1K,MAmB2BsL,CAAMtL,IADN,cAA0EA,EAAO,QAAUwK,QAEzI,MAGLe,EAAqB,SAAC,GAAW,IAAV9G,EAAS,EAATA,IACzB9F,EAAS,CACL6C,KAAMkB,EACNgC,QAASD,KAGjB,OACI,cAAC,IAAD,CAAMnD,KAAK,SAASkK,aAAc,CAAC,IAAKC,gBAAiB,CAAC,eAA1D,SACI,cAACpB,GAAD,CAA6B7K,MAAO,iCAAM,cAACkM,GAAA,EAAD,IAAgB,mDAA1D,SAEQjB,EAAY3F,KAAI,SAAC9E,EAAM2L,GACnB,OAEI,cAACtB,GAAD,CAAoB7K,MAAOQ,EAAM4L,aAAcL,EAA/C,SACKvH,EAAS2H,GAAO7G,KAAI,SAAA9E,GACjB,IAAIgC,EAASgC,EAAS2H,GAAO,KAAO3L,EAAQ,UAAY,QACpD6L,EAAO7H,EAAS2H,GAAO,KAAO3L,EAAQ,QAAU,SACpD,OACI,eAAC,IAAKY,KAAN,WAAgC,cAAC,KAAD,CAAKoB,MAAOA,EAAZ,SAAoB6J,IAAW7L,EAC1D4K,EAAgB5K,EAAMyK,EAAYkB,GAAQ3H,EAAS2H,GAAO,IAC1DN,EAAerL,KAFJA,EAAOwK,SALrBxK,OALf,kB,WCzDTsK,IAAXD,Q,QCmBQyB,GAlBM,WAYjB,OACI,cAAC,IAAD,CAAMxK,KAAK,SAASkK,aAAc,CAAC,IAAKjH,QAZ3B,WACb7H,EAAU0D,KACNC,KAAKC,UAAU,CACPC,QAAS,cACTC,KAAM,OAQlB,SACI,eAAC,IAAKI,KAAN,WAAW,+BAAM,cAACmL,GAAA,EAAD,MAAjB,iB,UCjBL1B,GAAWC,IAAXD,QAoCQ2B,GAnCE,SAAC9N,GAAW,IAClB+N,EAAsB/N,EAAtB+N,SAAUC,EAAYhO,EAAZgO,SAajB,OACI,cAAC,IAAD,CAAM5K,KAAK,SAAUiD,QAAS,SAAC4H,GAblB,IAACjM,IAcDiM,EAbbzP,EAAU0D,KACNC,KAAKC,UAAU,CACPC,QAAS,WACTC,KAAM,CACFR,KAAME,EAAOuE,SAU1BgH,gBAAiB,CAAC,YAFrB,SAGI,cAAC,GAAD,CAAwBjM,MAAO,iCAAM,cAACkM,GAAA,EAAD,IAAgB,gDAArD,SAEQO,EAASnH,KAAI,SAAC9E,EAAM2L,GAChB,OAEI,cAAC,IAAK/K,KAAN,UAAsB,iCAA2B,UAApBsL,EAASP,GAClC,+BAAM,cAACS,GAAA,EAAD,MAAyB,KAAMpM,MADzBA,OALnB,e,UCwDVqM,I,OA1EI,SAACnO,GAAW,IAAD,EACAyI,wBAAS2F,GADT,mBACnBnN,EADmB,KACZoN,EADY,OAEgB5F,mBAAS,IAFzB,mBAEnB6F,EAFmB,KAEJC,EAFI,OAGuB9F,oBAAS,GAHhC,mBAGnB+F,EAHmB,KAGDC,EAHC,KAInBC,EAAqB1O,EAArB0O,OAAQjC,EAAazM,EAAbyM,UAuCf,OACI,8BACI,eAAC,IAAD,CACInL,MAAM,SACN+H,QAASqF,EAAOrF,QAChBC,KA1CK,WACdmD,EAAU,2BAAIiC,GAAL,IAAarF,SAAS,KAC9B7K,EAAU0D,KACNC,KAAKC,UAAU,CACPC,QAAS,SACTC,KAAM,CACFqM,iBAAkBD,EAAOxB,WACzB0B,eAAgBN,EAChBO,aAAcH,EAAOzB,gBAmC7B1D,SA5BS,WACjBkD,EAAU,2BAAIiC,GAAL,IAAarF,SAAS,MA4BvByF,cAAe,CAAC7C,SAAUuC,GAL9B,UAOI,2DACA,eAAC,KAAMO,MAAP,CAAaC,MAAM,cAAcrE,SA5B5B,SAAAsD,GACb9M,QAAQC,IAAI,gBAAiB6M,EAAErD,OAAO3J,OACtCwN,GAAoB,GACpBJ,EAASJ,EAAErD,OAAO3J,OAEK,IAAnBgN,EAAErD,OAAO3J,OACTsN,EAAiB1J,GAAcoJ,EAAErD,OAAO3J,SAsBiBA,MAAOA,EAA5D,UACI,cAAC,KAAD,CAAQ+N,MAAM,eAAe/N,MAAO,EAApC,SACK4D,GAAc,KAEnB,cAAC,KAAD,CAAQmK,MAAM,eAAe/N,MAAO,EAApC,SACK4D,GAAc,KAEnB,cAAC,KAAD,CAAQmK,MAAM,eAAe/N,MAAO,EAApC,SACK4D,GAAc,KAEnB,eAAC,KAAD,CAAQmK,MAAM,eAAe/N,MAAO,EAApC,oBAEe,IAAVA,EAAc,cAAC,IAAD,CAAOM,MAAO,CAAEC,MAAO,IAAKqL,WAAY,IAAMlC,SA9B3D,SAAAsD,GAClB9M,QAAQC,IAAI,QAAS6M,EAAErD,OAAO3J,OAEhB,IAAVA,GACAsN,EAAiBN,EAAErD,OAAO3J,UA0B6E,kBCjBpGtB,gBAJS,SAACC,EAAOC,GAC5B,MAAO,CAAEoP,YAAarP,EAAM8O,UAGQ,GAAzB/O,EAjDS,SAACK,GAAW,IAAD,EACgDA,EAAMiP,YAA9EC,EADwB,EACxBA,qBAAsBN,EADE,EACFA,eAAgBD,EADd,EACcA,iBAAkBE,EADhC,EACgCA,aADhC,EAEDpG,oBAAS,GAFR,mBAExBY,EAFwB,KAEfmC,EAFe,KAI/BtK,qBAAU,WACNsK,EAAW0D,KACZ,CAAClP,EAAMiP,cAqBV,OACI,8BACI,eAAC,IAAD,CACI3N,MAAM,wBACN+H,QAASA,EACTC,KAxBK,SAAA2E,GACbzC,GAAW,GACXhN,EAAU0D,KACNC,KAAKC,UAAU,CACPC,QAAS,MACTC,KAAM,CACF2G,SAAU0F,EAAiBzF,OAC3BvD,KAAMkJ,EAAa3F,OACnBC,OZnBE,cYoCVI,SAVS,SAAA0E,GACjBzC,GAAW,IAUH2D,OAAQ,UACRC,WAAY,aANhB,UAQI,gDAAmBT,KACnB,4BAAIC,YCmBLjP,gBAJS,SAACC,EAAOC,GAC5B,MAAO,CAAC8F,KAAM/F,EAAM+F,QAGgB,GAAzBhG,EAlDD,SAACK,GAAW,IACf2F,EAAQ3F,EAAR2F,KADc,EAEiB8C,mBAAS,IAF1B,mBAEd8D,EAFc,KAED8C,EAFC,OAGW5G,oBAAS,iBAAM,CAAC,OAH3B,mBAGd3C,EAHc,KAGJwJ,EAHI,OAIW7G,oBAAS,iBAAM,MAJ1B,mBAIdsF,EAJc,KAIJwB,EAJI,OAKS9G,oBAAS,GALlB,mBAKdY,EALc,KAKLmC,EALK,OAMW/C,qBANX,mBAMd+D,EANc,KAMJgD,EANI,OAOW/G,oBAAS,iBAAM,MAP1B,mBAOduF,EAPc,KAOJyB,EAPI,OAQOhH,mBAAS,CAACY,SAAS,EAAO4D,WAAY,KAAMC,WAAY,OAR/D,mBAQdwB,EARc,KAQNjC,EARM,KA8BrB,OAjBAvL,qBAAU,WACU,MAAZyE,EAAK+J,KACD/J,EAAKI,YAAYsJ,EAAe1J,EAAKI,YACrCJ,EAAKG,UAAUwJ,EAAY3J,EAAKG,UAChCH,EAAKoI,UAAUwB,EAAY5J,EAAKoI,UAChCpI,EAAK6G,UAAUgD,EAAY7J,EAAK6G,UAChC7G,EAAKqI,UAAUyB,EAAY9J,EAAKqI,WAGlB,QAAdrI,EAAKrC,KAAgBxE,EAAaK,MAAMwG,EAAK+J,KAC1B,SAAd/J,EAAKrC,KAAiBxE,EAAaC,KAAK4G,EAAK+J,KACjD5Q,EAAaI,QAAQyG,EAAK+J,OAGpC,CAAC/J,IAIA,eAAC,IAAD,CAAMvC,KAAK,SAASiD,QAtBJ,SAAC4H,GACH,WAAVA,EAAE1H,KAAkBiF,GAAW,IAqBO8B,aAAc,CAAC,IAAKC,gBAAiB,CAAC,WAAY,eAA5F,UACI,cAAC,IAAK7K,KAAN,UACI,cAAC,GAAD,CAAY2G,QAASA,EAASmC,WAAYA,KAD/B,UAIf,cAAC,GAAD,IACA,cAAC,GAAD,CAAYe,YAAaA,EAAazG,SAAUA,EAAU0G,SAAUA,EAAUC,UAAWA,IACzF,cAAC,GAAD,CAAUsB,SAAUA,EAAUC,SAAUA,IACxC,cAAC,GAAD,CAAYU,OAAQA,EAAQjC,UAAWA,IACvC,cAAC,GAAD,UCKGkD,GAnDC,SAAC3P,GAAW,IAAD,EAEGyI,mBAAS,IAFZ,mBAEhBxH,EAFgB,KAEToN,EAFS,KAGhB7B,EAAiCxM,EAAjCwM,SAAUnD,EAAuBrJ,EAAvBqJ,QAASmC,EAAcxL,EAAdwL,WAClBnD,EAAaC,IAAbD,SACF7C,EAAcC,aAAY,SAAA7F,GAAK,OAAIA,EAAMG,MAAMkC,QAiCrD,OACI,cAAC,IAAD,CACIX,MAAK,aAAQkL,GACbnD,QAASA,EACTC,KApCS,WACRpB,GAAcjH,GAafzC,EAAU0D,KACNC,KAAKC,UAAU,CACXC,QAAS,iBACTC,KAAM,CACFR,KAAM0K,EACNzN,KAAMkC,MAjBlBzC,EAAU0D,KACNC,KAAKC,UAAU,CACXC,QAAS,MACTC,KAAM,CACF2G,SAAUzD,EAAY0D,OACtBvD,KAAM,KACNwD,OdnBM,iBcmCtBkF,EAAS,IACT7C,GAAW,IAYPjC,SAAU,WAAO8E,EAAS,IAAK7C,GAAW,IAJ9C,SAMI,cAACnD,EAAD,CAAUpH,MAAOA,EACV0J,SAZE,SAAC,GAA2B,IAAf1J,EAAc,EAAxB2J,OAAU3J,MAC1BoN,EAASpN,SCiCF2O,GAlEE,SAAC5P,GAAW,IAAD,EAEMyI,oBAAS,GAFf,mBAEjBY,EAFiB,KAERmC,EAFQ,OAGQ/C,mBAAS,IAHjB,mBAGjB+D,EAHiB,KAGPgD,EAHO,KAMlBK,EAAWpK,aAAa,SAAA7F,GAAK,OAAIA,EAAMkG,SAASgK,eAChDtK,EAAcC,aAAa,SAAA7F,GAAK,OAAIA,EAAMG,MAAMkC,QAMtD,OAFAd,QAAQC,IAAIoE,GAGZ,gCACI,cAAC,GAAD,CAASgH,SAAUA,EAAUnD,QAASA,EAASmC,WAAYA,IACvD,cAAC,IAAD,CACIjK,MAAS,CAACC,MAAM,OAAQuO,OAAO,OAAOC,SAAS,WAAYC,SAAS,QACpEC,WAAW,aACXC,WAAYN,EACZO,WAAY,SAAAC,GAAI,OACZ,eAAC,IAAK3N,KAAN,CAAWnB,MAAO,CAAE+O,QAAS,QAA7B,UACI,cAAC,IAAK5N,KAAK6N,KAAX,CACIC,OACI,cAAC,IAAD,CACIjP,MAAO,CACHK,gBAAiBmF,EACbsJ,EAAKvO,MAETkF,cAAe,UAEnBxD,KAAK,QACLyD,IAAK,EART,UAhBL7B,EA0ByBiL,EAAKvO,KAzB1CsD,EAAO8B,MAAM,KAAKN,KAAI,SAAA9E,GAAI,OAAIA,EAAK,SA4BtB2O,YAAaJ,EAAKvO,KAClBR,MAAO+O,EAAK7N,SAEf6N,EAAKvO,MAAQ0D,EACV,cAAC,IAAD,CACIlC,KAAK,UACLyJ,MAAM,QACNvJ,KAAK,QACL6C,QAAS,WAAOmJ,EAAYa,EAAKvO,MAAO0J,GAAW,IAJvD,mBAQI,cAAC,IAAD,CACAlI,KAAK,UACLyJ,MAAM,QACNvJ,KAAK,QACLyI,UAAY,EAJZ,sBAzCL,IAAA7G,SC4DZzF,gBAJS,SAACC,EAAOC,GAC5B,MAAO,CAAC6Q,MAAO9Q,EAAM+F,QAGe,GAAzBhG,EArEI,SAACK,GAAW,IACpB2Q,EAA2B3Q,EAA3B2Q,iBAAkBD,EAAS1Q,EAAT0Q,MADC,EAEFjI,mBAAS,IAFP,mBAEnB3G,EAFmB,KAEb8O,EAFa,OAGYnI,mBAAS,IAHrB,mBAGN4G,GAHM,WAIpB7J,EAAcC,aAAY,SAAA7F,GAAK,OAAIA,EAAMG,MAAMkC,QAJ3B,EAKIwG,oBAAS,GALb,mBAKnBY,EALmB,KAKVmC,EALU,KAqB1BtK,qBAAU,WACW,MAAbwP,EAAMhB,KACFgB,EAAM3K,YAAYsJ,EAAeqB,EAAM3K,cAIhD,CAAC2K,IAEJ,IAiBMzR,EACF,eAAC,IAAD,CAAOwD,MAAM,SAAb,UACI,cAAC,IAAD,CAAOM,YAAY,WAAW4H,SA/BrB,SAAAsD,GACb2C,EAAQ3C,EAAErD,OAAO3J,UA+Bb,cAAC,IAAD,CAAQqC,KAAK,UAAU+C,QAAS,kBApBtBV,EAoBqCgL,EApB/B1O,EAoBiDH,EAnBrE0J,GAAW,QACC,MAAR7F,GAAwB,MAAR1D,GAChBzD,EAAU0D,KACNC,KAAKC,UAAU,CACXC,QAAS,SACTC,KAAM,CACFkD,YAAaA,EACbqL,eAAgB5O,EAChB6O,YAAanL,OAThB,IAACA,EAAM1D,GAoBhB,uBAIR,OAEI,cAAC,KAAD,CAAShD,QAASA,EAASqC,MAAM,sBAAsBwJ,QAAQ,QAC3DzB,QAASA,EACT0B,gBA5CoB,SAAAkD,GACxBzC,EAAWyC,IAyCX,SAII,cAAC,IAAD,0BCjDL5C,I,OAAkCH,IAAlCG,QAAQJ,GAA0BC,IAA1BD,QAASE,GAAiBD,IAAjBC,OAAQ4F,GAAS7F,IAAT6F,MAkOjBpR,gBAJS,SAACC,EAAOC,GAC5B,MAAO,CAACC,MAAOF,EAAMG,MAAOiR,OAAQpR,EAAMqR,cAGN,GAAzBtR,EAjOF,SAAAK,GACOE,cACkBF,EAA3BS,SAA2BT,EAAjBF,MADjB,IAkBIoR,EAjBoBF,EAAUhR,EAAVgR,OAClBL,EAAmBlL,aAAY,SAAA7F,GAAK,OAAIA,EAAM+F,KAAKC,eAHvC,EAIY6C,oBAAS,GAJrB,mBAIXY,EAJW,KAIFmC,EAJE,OAKyB/C,oBAAS,GALlC,mBAKX0I,EALW,KAKKC,EALL,KAMZC,EAAepM,cANH,EAQcwD,mBAAS,IARvB,mBAQX+D,EARW,KAQDgD,EARC,KASZ1J,EAAWL,aAAY,SAAA7F,GACzB,OAAKA,EAAM+F,KAAKG,UAAalG,EAAM+F,KAAKI,WAGjCnG,EAAM+F,KAAKG,SAASlG,EAAM+F,KAAKI,WAAWC,QAAQ2K,IAF9C,QAKTnL,EAAcC,aAAY,SAAA7F,GAAK,OAAIA,EAAMG,MAAMkC,QAE/CqP,EADW7L,aAAY,SAAA7F,GAAK,OAAIA,EAAMkG,SAASgK,eAC5ByB,MAAK,SAAAtP,GAAI,OAAIA,EAAKH,OAAS0D,KAEpD,QAAe4I,GAAXkD,EAAsB,CAEtB,IADA,IAAIE,EAAc,GACT3Q,EAAI,EAAGA,EAAIyQ,EAAQ3F,SAAS5K,OAAQF,IACrCA,EAAI,IACJ2Q,GAAe,MAEnBA,GAAeF,EAAQ3F,SAAS9K,GAEpCqQ,EAAO,CACH,CACI5P,MAAO,OACPmP,YAAaa,EAAQxP,MAEzB,CACIR,MAAO,MACPmP,YAAaa,EAAQ/O,KAEzB,CACIjB,MAAO,SACPmP,YAAaa,EAAQ9O,QAEzB,CACIlB,MAAO,YACPmP,YAAae,IAMzB,IAAMC,EAAM,SAAChB,EAAajE,GACtB,OACI,gCACI,qBAAK1F,UAAU,UAAf,SACK2J,IAEL,qBAAK3J,UAAU,UAAf,SACI,cAAC,IAAD,CAAQT,QAAS,kBAAMqL,EAAYlF,IAAnC,yBAMVkF,EAAc,SAAClF,GACjBgD,EAAYhD,GACZhB,GAAW,IAgDf,OAjBAtK,qBAAU,WACiB,OAAnB8P,EAAOtS,QACPI,IAAaC,KAAK,CACdL,QAAQ,GAAD,OAAKsS,EAAO5L,OAAZ,wBACPqL,YAAagB,EAAIT,EAAOtS,QAAQK,KAAMiS,EAAO5L,QAC7CxG,SAAU,EACV+S,OAAQ,CAACC,WAAY,UAEE,OAApBZ,EAAOa,WACVb,EAAOa,SAAS7L,QAAQ,SAAW,EACnC8L,EAAc5S,QAAQ8R,EAAOa,UAE7BC,EAAc3S,MAAM6R,EAAOa,aAGpC,CAACb,IAGA,eAAC,IAAD,CAAQzP,MAAO,CAACwO,OAAQ,SAAxB,UACI,cAAC,GAAD,CAASvD,SAAUA,EAAUnD,QAASA,EAASmC,WAAYA,IAC3D,cAACuF,GAAD,CAAOvP,MAAM,QAAQuQ,MAAM,QAAQxQ,MAAO,CAACyQ,UAAW,QAAtD,SACI,cAAC,GAAD,MAEJ,eAAC,IAAD,CAAQzQ,MAAO,CAAC0Q,SAAU,UAA1B,UACI,eAAC,GAAD,CACI1Q,MAAO,CACH+O,QAAS,EACT1O,gBAAiB,SAHzB,UAOK+O,GACG,sBACI9M,GAAI,6BACJtC,MAAO,CAACI,SAAU,SAAUuQ,WAAY,UAF5C,SAITvB,GAAoB,KAGdA,GACG,sBACI9M,GAAI,8BACJtC,MAAO,CAACI,SAAU,SAAUkL,WAAY,QAF5C,SAIR/G,GAAQ,WAAQA,EAAS/E,OAAjB,MAA+B,KAGnC,eAAC,IAAD,CAAOQ,MAAO,CAACsJ,MAAO,SACfrH,KAAK,SADZ,UAEI,8BAEyB,MAApBmN,EAA2B,yCArExC,cAAC,IAAD,CAAQ7J,UAAU,aAAaT,QAAS,WAC5CgL,EAAa,CACT/N,KAAMsB,GACN4B,QAAS,OAEbhI,EAAU0D,KACNC,KAAKC,UAAU,CACPC,QAAS,WACTC,KAAM,CACFR,KAAM6O,OATlB,kBAqEuD,cAAC,GAAD,CACvCA,iBAAkBA,IADM,OACoB,OAIpD,cAAC,IAAD,CAAQrN,KAAK,UAAUyJ,MAAM,SAASoF,KAAM,cAACC,EAAA,EAAD,IAAiB/L,QApF9D,WACf+K,GAAiB,MAoFD,eAAC,IAAD,CACI9P,MAAM,eACN2G,UAAU,OACVoK,UAAU,EACVC,QArFR,WACZlB,GAAiB,IAqFG/H,QAAS8H,EALb,UAOI,cAAC,IAAD,CACIjB,WAAW,aACXC,WAAYe,EACZd,WAAY,SAAAC,GAAI,OACZ,cAAC,IAAK3N,KAAN,UACI,cAAC,IAAKA,KAAK6N,KAAX,CACIjP,MAAO+O,EAAK/O,MACZmP,YAAaJ,EAAKI,mBAMlC,cAAC,IAAD,CACInN,KAAK,UACLyJ,MAAM,QACNvJ,KAAK,QACL6C,QAAS,WACL7H,EAAU0D,KACNC,KAAKC,UAAU,CACXC,QAAS,SACTC,KAAM,OARtB,6BAoBZ,cAAC,GAAD,CAASf,MAAO,CAACE,OAAQ,eAAzB,SACI,eAAC,IAAD,CAAKF,MAAO,CAACwO,OAAQ,QAArB,UACI,cAAC,IAAD,CAAKxQ,KAAM,GAAX,SACI,qBACIuH,UAAU,yBACVvF,MAAO,CAACgR,UAAW,IAAKxC,OAAQ,QAFpC,SAIKY,GAAoB,cAAC,GAAD,CAAUjL,SAAUiL,QAGjD,cAAC,IAAD,CACIpR,KAAM,EACNgC,MAAO,CAACiR,WAAY,iCAFxB,SAIK5C,YAOb,cAAC,GAAD,CAAQrO,MAAO,CAAC2B,UAAW,UAA3B,iE,UCrOZuP,I,OAAQ,G,SCmBG9S,gBAJS,SAACC,GACrB,MAAO,CAAE8S,WAAY9S,EAAMG,SAGS,GAAzBJ,EAjBM,SAAC,GAAsC,IAA1BgT,EAAyB,EAApCC,UAAyB5S,EAAW,8BACvD,OAAO,cAAC,IAAD,2BAAWA,GAAX,IAAkB6S,OAAQ,WAE7B,OADc7S,EAAM0S,WAAWrR,WAEpB,cAACsR,EAAD,IAEA,cAAC,IAAD,CAAUG,GAAI,CACjBC,SAAU,cCCpB9S,GAAU+S,eAmCDrT,gBAJS,SAACC,EAAOC,GAC5B,MAAO,CAAEnB,QAASkB,EAAMlB,WAGY,CAAEuU,UF3CjB,SAAC3H,GAAD,OACrB,SAAA7K,GACI,IAAMyQ,EAAO/O,KAAK+Q,MAAM5H,EAAS4F,MACjC,OAAQA,EAAKiC,SACT,IAAK,QACiB,QAAdjC,EAAK5N,KACL7C,EAAS,CAAC6C,KAAMW,EAASuC,QAAS,CAACiM,MAAOA,KAASpR,YAAY,EAAOY,KAAM,KAAMyN,IAAKwB,EAAKxB,OAE5FjP,EAAS,CACL6C,KAAMW,EACNuC,QAAS,CAACiM,MAAOA,KAASpR,YAAY,EAAMY,KAAMiP,EAAKxB,IAAKA,IAAKwB,EAAKxB,OAG9E,MACJ,IAAK,SACDjP,EAAS,CAAC6C,KAAMY,EAAUsC,QAAS,CAACiM,MAAOA,KAASpR,YAAY,EAAOY,KAAM,KAAMyN,IAAKwB,EAAKxB,OAC7F,MACJ,IAAK,OACDjP,EAAS,CACL6C,KAAMiB,EACNiC,QAAS,CACL4M,QAASlC,EAAKkC,QACd9P,KAAM4N,EAAK5N,KACXoM,IAAKwB,EAAKxB,IACV2D,OAAQnC,EAAKmC,OACbC,OAAQpC,EAAKoC,OACbC,OAAQrC,EAAKqC,OACbC,OAAQtC,EAAKsC,OACbC,OAAQvC,EAAKuC,UAGrB,MACJ,IAAK,SACD,IAAMnR,EAAOH,KAAK+Q,MAAMhC,EAAKxB,KAC7BjP,EAAS,CACL6C,KAAMmB,EACN+B,QAAS,CACLmI,iBAAkBrM,EAAKqM,iBACvBC,eAAgBtM,EAAKsM,eACrBC,aAAcvM,EAAKuM,gBAG3B,MACJ,IAAK,UAGDpO,EAAS,CAAE6C,KAFE4N,EAAKkC,QAED5M,QADDrE,KAAK+Q,MAAMhC,EAAKxB,OAEhC,MACJ,IAAK,iBACD,GAAoB,oBAAjBwB,EAAKkC,QAA+B,CACnC3S,EAAS,CAAC6C,KAAMoB,EAAa8B,QAAS,KAAMpB,OAAQ,KAAMyM,SAAUX,EAAKxB,MACzE,MAEJ,IAAMtK,EAAS8L,EAAKkC,QAEpB3S,EAAS,CAAC6C,KAAMoB,EAAa8B,QAASrE,KAAK+Q,MAAMhC,EAAKxB,KAAMtK,OAAQA,EAAQyM,SAAU,OACtF,MACJ,IAAK,cACDpR,EAAS,CACL6C,KAAMqB,GACN6B,QAASrE,KAAK+Q,MAAMhC,EAAKxB,WEjB9B/P,EAjCH,SAACK,GACmBA,EAArBS,SAAqBT,EAAXtB,QAejB,OAbAF,EAAUkV,OAAS,WACjBvS,QAAQC,IAAI,cAGd5C,EAAUmV,UAAY,SAACjV,GACrByC,QAAQC,IAAI1C,GACZsB,EAAMiT,UAAUvU,IAGlBF,EAAUoV,QAAU,WAChBC,IAAM1U,MAAM,CAACF,QAAS,yDAI1B,qBAAK6H,UAAU,MAAf,SACG,cAAC,IAAD,CAAQ7G,QAASA,GAAjB,SACC,eAAC,IAAD,WACE,cAAC,IAAD,CAAO6T,KAAK,IAAIC,OAAK,EAACnB,UAAWoB,IACjC,cAAC,GAAD,CAAcF,KAAK,QAAQC,OAAK,EAACnB,UAAWqB,eCxBvCC,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,mBCJRQ,I,OAAe,CACnBtT,WAAY,KACZY,KAAM,KACNwQ,MAAO,EACP/C,IAAK,OCADkF,GAAgB,CACpBtJ,SAAU,ICNNsJ,GAAgB,CACpB9E,YAAc,ICAV6E,I,OAAe,CACjBvB,QAAS,KACT9P,KAAM,KACNoM,IAAK,KACL9J,YAAa,KACbG,WAAW,GACXD,SAAU,CAAC,IACXiI,SAAU,GACVC,SAAU,KAsCRkF,GAAQ,SAACjS,GACX,OAAIA,EACa,OAAVA,EAAuB,GAClBA,EAAM4T,UAAU,EAAG5T,EAAMF,OAAS,GACjCmG,MAAM,MAEZ,MAGL4N,GAAkB,SAACzB,EAAQpS,GAC7B,GAAGA,EAAO,CACN,GAAa,OAAVA,EAAgB,MAAO,GAI1B,IAHA,IAAIF,EAASmS,GAAMG,GAAQtS,OACvBgU,EAAO,GACPC,EAAI/T,EAAM4T,UAAU,EAAG5T,EAAMF,OAAS,GAClCF,EAAI,EAAGA,EAAIE,EAAQF,IAAI,CAC3B,IAAIoU,EAAQD,EAAEhP,QAAQ,KAClBkP,EAAMF,EAAEhP,QAAQ,KAChBmP,EAAMH,EAAEH,UAAUI,EAAQ,EAAGC,GAAKhO,MAAM,MAC5C6N,EAAK/T,KAAKmU,GACVH,EAAIA,EAAEH,UAAUK,EAAM,GAE1B,OAAOH,EAEX,OAAO,MCvELH,GAAgB,CAClB1F,sBAAsB,EACtBP,iBAAiB,GACjBC,eAAgB,GAChBC,aAAa,ICHX8F,GAAe,CACjBjW,QAAS,KACT0G,OAAQ,KACRyM,SAAU,MCICuD,gBAAgB,CAC7BrV,MNDa,WAAmC,IAAlCH,EAAiC,uDAAzB+U,GAAcU,EAAW,uCAC/C,OAAQA,EAAO/R,MACb,KAAKW,EACH,OAAkC,IAA9BoR,EAAO7O,QAAQnF,WACV,2BAAKzB,GAAZ,IAAmByB,YAAY,EAAMY,KAAMoT,EAAO7O,QAAQvE,KAAMwQ,MAAO4C,EAAO7O,QAAQiM,MAAO/C,IAAK2F,EAAO7O,QAAQkJ,MAEjH,2BAAY9P,GAAZ,IAAmByB,YAAY,EAAOY,KAAM,KAAMwQ,MAAO4C,EAAO7O,QAAQiM,MAAO/C,IAAK2F,EAAO7O,QAAQkJ,MACvG,KAAKxL,EACH,OAAO,2BAAKtE,GAAZ,IAAmByB,WAAY,KAAMY,KAAM,KAAMwQ,MAAO4C,EAAO7O,QAAQiM,MAAO/C,IAAK2F,EAAO7O,QAAQkJ,MACpG,QACE,OAAO9P,IMRXlB,QLDa,WAA2C,IAAjCkB,EAAgC,uDAAxBgV,GAAeS,EAAS,uCACvD,OAAQA,EAAO/R,MACb,KAAKa,EAAa,IACRmH,EAAa1L,EAAb0L,SADO,EAEwC+J,EAAO7O,QAAtD3C,EAFO,EAEPA,GAAI7E,EAFG,EAEHA,KAAMmG,EAFH,EAEGA,KAAMC,EAFT,EAESA,OAAQM,EAFjB,EAEiBA,SAAUH,EAF3B,EAE2BA,SAW1C,OAVK+F,EAAS5F,KACZ4F,EAAS5F,GAAY,IAEvB4F,EAAS5F,GAAU1E,KAAK,CACtB6C,KACA7E,OACAmG,OACAC,SACAG,aAEK,2BAAK3F,GAAZ,IAAmB0L,SAAS,eAAMA,KAEpC,KAAKlH,EAAiB,IACZkH,EAAa1L,EAAb0L,SADW,EAEa+J,EAAO7O,QAA/BtB,EAFW,EAEXA,UAAWQ,EAFA,EAEAA,SACb4P,EAAsBhK,EAAS5F,GAAU6P,QAC7C,SAAAC,GAAC,OAAIA,EAAE3R,KAAOqB,KAEVuQ,EAAW,eAAQnK,GAEzB,OADAmK,EAAY/P,GAAY4P,EACjB,2BACF1V,GADL,IAEE0L,SAAUmK,IAGd,KAAKnR,EAAiB,IACZgH,EAAa1L,EAAb0L,SADW,EAEyB+J,EAAO7O,QAA3CtB,EAFW,EAEXA,UAAWQ,EAFA,EAEAA,SAAUJ,EAFV,EAEUA,WACvBgQ,EAAsBhK,EAAS5F,GAAUkB,KAAI,SAAA4O,GAMjD,OALIA,EAAE3R,KAAOqB,IACXsQ,EAAEnQ,YAAa,EACfmQ,EAAElQ,WAAaA,EACfkQ,EAAExW,KAAO,IAEJwW,KAEHC,EAAW,eAAQnK,GAEzB,OADAmK,EAAY/P,GAAY4P,EACjB,2BACF1V,GADL,IAEE0L,SAAUmK,IAGd,KAAKpR,EAAe,IACViH,EAAa1L,EAAb0L,SADS,EAE2B+J,EAAO7O,QAA3CtB,EAFS,EAETA,UAAWQ,EAFF,EAEEA,SAAUsD,EAFZ,EAEYA,WACvBsM,EAAsBhK,EAAS5F,GAAUkB,KAAI,SAAA4O,GAIjD,OAHIA,EAAE3R,KAAOqB,IACXsQ,EAAExW,KAAOgK,GAEJwM,KAEHC,EAAW,eAAQnK,GAEzB,OADAmK,EAAY/P,GAAY4P,EACjB,2BACF1V,GADL,IAEE0L,SAAUmK,IAGd,QACE,OAAO7V,IK/DXkG,SJNa,WAAqC,IAApClG,EAAmC,uDAA1BgV,GAAeS,EAAW,uCACjD,OAAQA,EAAO/R,MACb,KAAKqB,GAEH,OADAxD,QAAQC,IAAIiU,EAAO7O,SACZ,2BAAI5G,GAAX,IAAkBkQ,YAAauF,EAAO7O,UACxC,QACE,OAAO5G,IICX+F,KHAa,WAAmC,IAAlC/F,EAAiC,uDAAzB+U,GAAcU,EAAW,uCAC7C,OAAQA,EAAO/R,MACX,KAAKiB,EACF,IAAImR,EAAe9V,EAAMgG,YAExB,MAD4B,OAA1ByP,EAAO7O,QAAQ6M,SAAiBqC,EAAe,MAC1C,CACHtC,QAASiC,EAAO7O,QAAQ4M,QACxB9P,KAAM+R,EAAO7O,QAAQlD,KACrBoM,IAAK2F,EAAO7O,QAAQkJ,IACpB3J,WAAYmN,GAAMmC,EAAO7O,QAAQ6M,SAAWzT,EAAMmG,WAClDD,SAAUgP,GAAgBO,EAAO7O,QAAQ6M,OAAQgC,EAAO7O,QAAQ8M,SAAW1T,EAAMkG,SACjFiI,SAAUmF,GAAMmC,EAAO7O,QAAQ+M,SAAW3T,EAAMmO,SAChDvB,SAAU6I,EAAO7O,QAAQgN,QAAU5T,EAAM4M,SACzCwB,SAAUkF,GAAMmC,EAAO7O,QAAQiN,SAAW7T,EAAMoO,SAChDpI,YAAa8P,GAErB,KAAKlR,EAOL,KAAKI,GACD,OAAO,2BACAhF,GADP,IAEI8P,IAAI,KACJ9J,YAAayP,EAAO7O,UAG5B,QACI,OAAO5G,IG9BjB8O,OFNa,WAAoC,IAAnC9O,EAAkC,uDAA1BgV,GAAeS,EAAW,uCAC9C,OAAQA,EAAO/R,MACX,KAAKmB,EACD,OAAO,2BAAK7E,GAAZ,IAAmBsP,sBAAsB,EAAMN,eAAgByG,EAAO7O,QAAQoI,eAC1ED,iBAAkB0G,EAAO7O,QAAQmI,iBAAkBE,aAAcwG,EAAO7O,QAAQqI,eACxF,QACI,OAAOjP,IECjBqR,WDPa,WAAmC,IAAlCrR,EAAiC,uDAAzB+U,GAAcU,EAAW,uCAC7C,OAAQA,EAAO/R,MACX,KAAKoB,EACD,OAAO,2BAAK9E,GAAZ,IAAmBwF,OAAQiQ,EAAOjQ,OAAQ1G,QAAS2W,EAAO7O,QAASqL,SAAUwD,EAAOxD,WACxF,KAAK3N,EACD,OAAO,2BAAItE,GAAU+U,IACzB,QACI,OAAO/U,MELb+V,I,OAAmBC,OAAOC,sCAAwCC,MAClEC,GAAQC,aAAYC,GAAgCN,GAAiBO,aAAgBC,QAE3FC,IAASvD,OACP,cAAC,IAAD,CAAUkD,MAAOA,GAAjB,SACI,cAAC,GAAD,MAEJzO,SAASC,eAAe,SAM1B2M,O","file":"static/js/main.50ab5f2d.chunk.js","sourcesContent":["\r\n// const webSocket = new WebSocket(\"wss://chatapp-team-sammytheowl.herokuapp.com/chatapp\")\r\nconst webSocket = new WebSocket(\"ws://localhost:4567/chatapp\")\r\nexport default webSocket;\r\n\r\n\r\n\r\n\r\n","import { message } from \"antd\";\r\n\r\nmessage.config({\r\n  duration: 3,\r\n  maxCount: 5\r\n});\r\n\r\nconst notification = {\r\n  info: (text) => {\r\n    message.info({ content: text }, 5);\r\n  },\r\n  success: text => {\r\n    message.success({ content: text }, 5);\r\n  },\r\n  error: text => {\r\n    message.error({ content: text }, 5);\r\n  },\r\n  warn: text => {\r\n    message.warn({ content: text }, 5);\r\n  }\r\n};\r\n\r\nexport default notification;\r\n","import {React, useEffect, useState} from 'react'\r\nimport {Card, Form, Input, message, Button, Select, Modal, InputNumber, Tooltip} from 'antd'\r\nimport { QuestionCircleOutlined } from '@ant-design/icons';\r\nimport {useHistory} from 'react-router-dom'\r\nimport webSocket from \"../websocket/Websocket\"\r\nimport { connect } from 'react-redux'\r\nimport notification from \"../notification\";\r\n\r\n\r\nconst layout = {\r\n    labelCol: {span: 4},\r\n    wrapperCol: {span: 20},\r\n};\r\n\r\nconst validateMessages = {\r\n    required: '${label} is required!'\r\n};\r\n\r\nconst Login = (props) => {\r\n\r\n    const history = useHistory();\r\n    const {Option} = Select;\r\n    const interests = [];\r\n    const schools = [];\r\n    const interest_string_list = [\"Traveling\", \"Reading\", \"Music\", \"Sports\", \"Movies\", \"Games\"];\r\n    const school_string_list = [\"Rice University\", \"Duke University\", \"USC\", \"UCLA\", \"New York University\", \"Other\"];\r\n    const {dispatch, logIn} = props;\r\n    const [form] = Form.useForm();\r\n    const {validateFields} = form;\r\n    // const ss=[{value:'a', label:'a'}]\r\n\r\n    for (let i = 0; i < school_string_list.length; i++) {\r\n        schools.push(<Option value={school_string_list[i]}>{school_string_list[i]}</Option>);\r\n    }\r\n\r\n    for (let i = 0; i < interest_string_list.length; i++) {\r\n        interests.push(<Option value={interest_string_list[i]}>{interest_string_list[i]}</Option>);\r\n    }\r\n\r\n    const onFinish = values => {\r\n        console.log(values.user);\r\n        webSocket.send(\r\n            JSON.stringify({\r\n                command: \"login\",\r\n                body: {\r\n                    name: values.user.name,\r\n                    age: values.user.age,\r\n                    school: values.user.school,\r\n                    interests: values.user.interests\r\n                }\r\n            })\r\n        )\r\n\r\n    };\r\n\r\n    useEffect(() => {\r\n        console.log(logIn);\r\n        if(logIn) {\r\n            if (logIn.isSignedIn !== null) {\r\n                if (logIn.isSignedIn === true) {\r\n                    history.push('/chat');\r\n                } else {\r\n                    notification.error(\"The username already exists. Please choose another one!\");\r\n                }\r\n            }\r\n        }\r\n    }, [logIn])\r\n\r\n    return (\r\n        <Card title=\"Login Chat Room\" style={{width: '600px', margin: '80px auto'}}\r\n              headStyle={{fontSize: '30px', backgroundColor: '#d9d9d9'}}\r\n              bodyStyle={{backgroundColor: '#f5f5f5'}}>\r\n            <Form {...layout} name=\"LoginForm\" form={form} onFinish={onFinish} validateMessages={validateMessages} align=\"left\">\r\n                <Form.Item\r\n                    name={['user', 'name']}\r\n                    label={\r\n                        <span>\r\n                            Name&nbsp;\r\n                            <Tooltip title=\"5-20 alphanumeric characters or underscores\">\r\n                                <QuestionCircleOutlined />\r\n                            </Tooltip>\r\n                        </span>\r\n                    }\r\n                    rules={[\r\n                        {\r\n                            required: true,\r\n                            message: 'Name is required!',\r\n                        },\r\n                        {\r\n                            pattern: /^[a-zA-Z0-9_]{5,20}$/,\r\n                            message: 'Name should be 5-20 alphanumeric characters or underscores',\r\n                        },\r\n                    ]}>\r\n                    <Input placeholder=\"Your Name\"/>\r\n                </Form.Item>\r\n\r\n                <Form.Item name={['user', 'age']} label=\"Age\" rules={[{required: true}]}>\r\n                    <InputNumber min={0} max={200}/>\r\n                </Form.Item>\r\n\r\n                <Form.Item name={['user', 'school']} label=\"School\" rules={[{required: true}]}>\r\n                    <Select style={{width: '100%', textAlign: 'left'}}\r\n                            allowClear\r\n                            placeholder=\"Please select your school\">{schools}</Select>\r\n                </Form.Item>\r\n\r\n                <Form.Item name={['user', 'interests']} label=\"Interests\" rules={[{required: true}]}>\r\n                    <Select mode=\"multiple\"\r\n                            allowClear\r\n                            style={{width: '100%', textAlign: 'left'}}\r\n                            placeholder=\"Please select your interests\">{interests}</Select>\r\n                </Form.Item>\r\n\r\n                <Form.Item wrapperCol={{...layout.wrapperCol, offset: 20}}>\r\n                    <Button type=\"primary\" htmlType=\"submit\" size=\"large\" >\r\n                        Login\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </Card>\r\n\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return { logIn: state.login }\r\n  };\r\n\r\nexport default connect(mapStateToProps, {})(Login);","const FLAT_BLUE = '#355ca9';\r\nconst DEEP_LAVENDER = '#8665b6';\r\nconst AZURE = '#2196f2';\r\nconst COOL_BLUE = '#5571bc';\r\nconst ORANGE_RED = '#fe5722';\r\nconst SLATE = '#43555f';\r\nconst TEAL = '#009688';\r\nconst MARIGOLD = '#febf0a';\r\nconst PINK = '#e81f63';\r\nconst AZURE_TWO = '#06a9f3';\r\nconst TURQUOISE_BLUE = '#03bcd3';\r\nconst TANGERINE = '#fe9800';\r\nconst SUNSHINE_YELLOW = '#feea3b';\r\nconst SICKLY_YELLOW = '#ccdb3a';\r\nconst GREEN = '#8bc24b';\r\nconst MID_GREEN = '#4baf50';\r\nconst VIRIDIAN = '#22828d';\r\nconst FRENCH_BLUE = '#3f51b5';\r\nconst BARNEY = '#9c26b0';\r\nconst BLUEY_PURPLE = '#673ab7';\r\nconst BLUE_GREY = '#607d8b';\r\nconst WARM_GREY = '#9e9e9e';\r\nconst DARK_TAUPE = '#795548';\r\n\r\nconst COLORS = [\r\n    FLAT_BLUE,\r\n    AZURE,\r\n    COOL_BLUE,\r\n    ORANGE_RED,\r\n    SLATE,\r\n    DEEP_LAVENDER,\r\n    TEAL,\r\n    MARIGOLD,\r\n    PINK,\r\n    AZURE_TWO,\r\n    TURQUOISE_BLUE,\r\n    TANGERINE,\r\n    SUNSHINE_YELLOW,\r\n    SICKLY_YELLOW,\r\n    GREEN,\r\n    MID_GREEN,\r\n    VIRIDIAN,\r\n    FRENCH_BLUE,\r\n    BARNEY,\r\n    BLUEY_PURPLE,\r\n    BLUE_GREY,\r\n    WARM_GREY,\r\n    DARK_TAUPE,\r\n];\r\nlet copyCOLORS = [\r\n    ...COLORS,\r\n];\r\n\r\nconst getAColor = () => {\r\n    let color = copyCOLORS.shift();\r\n    if (!color) {\r\n        copyCOLORS = [\r\n            ...COLORS,\r\n        ];\r\n        color = copyCOLORS.shift();\r\n    }\r\n    return color;\r\n};\r\n\r\nconst COLOR_ASSIGNS = {};\r\nconst assignColors = (id) => {\r\n    if (!COLOR_ASSIGNS[id]) {\r\n        COLOR_ASSIGNS[id] = getAColor();\r\n    }\r\n    return COLOR_ASSIGNS[id];\r\n};\r\nexport default assignColors;\r\n","export const SIGN_IN = 'SIGN_IN';\r\nexport const SIGN_OUT = 'SIGN_OUT';\r\n\r\nexport const ON_MESSAGE = 'ON_MESSAGE';\r\nexport const DELETE_MESSAGE = 'DELETE_MESSAGE';\r\nexport const EDIT_MESSAGE = 'EDIT_MESSAGE';\r\nexport const RECALL_MESSAGE = 'RECALL_MESSAGE';\r\n\r\nexport const ROOM = 'ROOM';\r\nexport const JOIN_ROOM = 'JOIN_ROOM';\r\n\r\nexport const ON_REPORT = 'ON_REPORT';\r\nexport const BAN = 'BAN';\r\n\r\nexport const PRI_MESSAGE = 'PRI_MESSAGE';\r\n\r\nexport const RESET = 'RESET';\r\nexport const SETALLUSERS = 'SETALLUSERS';\r\nexport const EXIT_ROOM = 'EXIT_ROOM';","export const reportReasons = [\"Sexual Content\", \"Violent or repulsive content\", \"Spam or misleading\"];\r\nexport const BAN_BROADCAST = \"broadcast\";\r\nexport const BAN_PRIVATEMSG = \"privateMsg\";\r\nexport const BAN_REPORT = \"report\";","import React from \"react\";\r\nimport { Row, Col, Menu, Dropdown, Button, Avatar } from \"antd\";\r\nimport moment from \"moment\";\r\nimport \"./ChatMessage.css\";\r\nimport colorHelper from \"../../../helpers/color-user-helper\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n  DELETE_MESSAGE,\r\n  RECALL_MESSAGE,\r\n  EDIT_MESSAGE\r\n} from \"../../../actions/type\";\r\nimport webSocket from \"../../websocket/Websocket\";\r\nimport { BAN_BROADCAST } from \"../../room/report/constant\";\r\nimport Interweave from 'interweave';\r\nimport { UrlMatcher } from 'interweave-autolink';\r\n\r\nconst ChatMessage = ({ message, onClickEdit }) => {\r\n  const dispatch = useDispatch();\r\n  const {\r\n    id: messageId,\r\n    text,\r\n    time,\r\n    sender,\r\n    isRecalled,\r\n    recallTime,\r\n    received\r\n  } = message;\r\n\r\n  const currentUser = useSelector(state => state.login.user);\r\n  const chatRoom = useSelector(state => state.room.currentRoom);\r\n  const userList = useSelector(state => state.room.userList);\r\n  const roomState = useSelector(state => state.room);\r\n  const roomAdmin = useSelector(state => {\r\n    if (!state.room.userList || !state.room.joinedRoom || !state.room.userList[state.room.joinedRoom.indexOf(chatRoom)]) {\r\n      return null;\r\n    }\r\n    return state.room.userList[state.room.joinedRoom.indexOf(chatRoom)][0];\r\n  });\r\n  const isOwnMessage = currentUser === message.sender;\r\n  const isAdmin = currentUser === roomAdmin;\r\n  const isAdminMessage = sender === roomAdmin;\r\n  const getOperationsForMessage = (isAdmin, isOwnMessage) => {\r\n    if (isOwnMessage) {\r\n      return [\"edit\", \"delete\", \"recall\"];\r\n    }\r\n    if (isAdmin) {\r\n      return [\"delete\"];\r\n    }\r\n    return [];\r\n  };\r\n  const handleMenuClick = event => {\r\n    if (!event || !event.key) {\r\n      return;\r\n    }\r\n    switch (event.key) {\r\n      case \"edit\": {\r\n        onClickEdit(message);\r\n        break;\r\n      }\r\n      case \"delete\": {\r\n        dispatch({\r\n          type: DELETE_MESSAGE,\r\n          payload: {\r\n            messageId,\r\n            chatRoom\r\n          }\r\n        });\r\n        webSocket.send(\r\n          JSON.stringify({\r\n            command: \"deleteMessage\",\r\n            body: {\r\n              messageId,\r\n              chatRoom\r\n            }\r\n          })\r\n        );\r\n        break;\r\n      }\r\n      case \"recall\": {\r\n        dispatch({\r\n          type: RECALL_MESSAGE,\r\n          payload: {\r\n            messageId,\r\n            chatRoom\r\n          }\r\n        });\r\n        webSocket.send(\r\n          JSON.stringify({\r\n            command: \"recallMessage\",\r\n            body: {\r\n              messageId,\r\n              chatRoom,\r\n              recallTime: new Date().getTime()\r\n            }\r\n          })\r\n        );\r\n        break;\r\n      }\r\n    }\r\n  };\r\n  const menu = (\r\n    <Menu onClick={handleMenuClick}>\r\n      {getOperationsForMessage(isAdmin, isOwnMessage).map(operation => {\r\n        return <Menu.Item key={operation}>{operation}</Menu.Item>;\r\n      })}\r\n    </Menu>\r\n  );\r\n\r\n  const handleMouseEnter = () => {\r\n    const dropDownElement = document.getElementById(`${messageId}-dropdown`);\r\n    if (!dropDownElement) {\r\n      return;\r\n    }\r\n    dropDownElement.style.visibility = \"visible\";\r\n    dropDownElement.style.opacity = \"1\";\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    const dropDownElement = document.getElementById(`${messageId}-dropdown`);\r\n    if (!dropDownElement) {\r\n      return;\r\n    }\r\n    dropDownElement.style.visibility = \"hidden\";\r\n    dropDownElement.style.opacity = \"0\";\r\n  };\r\n\r\n  const getDisplayName = sender => {\r\n    return sender.split(\"_\").map(name => name[0]);\r\n  };\r\n\r\n  const getRecallText = (sender, recallTime) => {\r\n    return `******* This message was recalled at ${moment(recallTime).format(\r\n      \"MMM DD hh:mm\"\r\n    )} *******`;\r\n  };\r\n\r\n  return (\r\n    <Row>\r\n      <Col span={1} className=\"avatar-container\">\r\n        <Avatar\r\n          style={{\r\n            backgroundColor: colorHelper(sender),\r\n            verticalAlign: \"middle\"\r\n          }}\r\n          size=\"large\"\r\n          gap={1}\r\n        >\r\n          {getDisplayName(sender)}\r\n        </Avatar>\r\n      </Col>\r\n      <Col span={23}>\r\n        <Row\r\n          className={`${messageId ?? \"\"} message-wrapper`}\r\n          onMouseEnter={handleMouseEnter}\r\n          onMouseLeave={handleMouseLeave}\r\n        >\r\n          <Col span={22}>\r\n            <Row className=\"message-header\">\r\n              <Col className=\"message-sender\">\r\n                {(isOwnMessage && \"ME\") || sender}{\" \"}\r\n                {isAdminMessage && \" (admin)\"}\r\n              </Col>\r\n              <Col className=\"message-time\">\r\n                {!isRecalled && moment(time).format(\"ddd MMM DD hh:mm:ss\")}\r\n                {received && \" (received)\"}\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col className=\"message-text\">\r\n                <Interweave\r\n                    content={(!isRecalled && text) || getRecallText(sender, recallTime)}\r\n                    matchers={[new UrlMatcher('url')]}\r\n                />\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n          <Col\r\n            span={2}\r\n            id={`${messageId}-dropdown`}\r\n            className={\"message-dropdown\"}\r\n          >\r\n            {!isRecalled && (isOwnMessage || isAdmin) && (\r\n              <Dropdown overlay={menu} placement=\"bottomLeft\">\r\n                <Button>...</Button>\r\n              </Dropdown>\r\n            )}\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n    </Row>\r\n  );\r\n};\r\nexport default ChatMessage;\r\n","export const messageCensor = (content) => {\r\n    return !content.toLowerCase().includes(\"hate\");\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport { Row, Input, Modal } from \"antd\";\r\nimport ChatMessage from \"./ChatMessage\";\r\nimport \"./ChatMessages.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { EDIT_MESSAGE } from \"../../../actions/type\";\r\nimport webSocket from \"../../websocket/Websocket\";\r\nimport {messageCensor} from \"../../../helpers/util\";\r\nimport {BAN_BROADCAST} from \"../../room/report/constant\";\r\nconst { TextArea } = Input;\r\n\r\nconst ChatMessages = ({ inputMessages }) => {\r\n  const dispatch = useDispatch();\r\n  const currentUser = useSelector(state => state.login.user);\r\n  const currentRoom = useSelector(state => state.room.currentRoom);\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [messageToEdit, setMessageToEdit] = useState(\"\");\r\n\r\n  const handleModalOK = () => {\r\n    setModalVisible(false);\r\n    const editMessageTextArea = document.getElementById(`editMessageTextArea`);\r\n\r\n    if (!messageCensor(editMessageTextArea.value)) {\r\n      webSocket.send(\r\n        JSON.stringify({\r\n          command: \"ban\",\r\n          body: {\r\n            username: currentUser.trim(),\r\n            room: currentRoom.trim(),\r\n            source: BAN_BROADCAST\r\n          }\r\n        })\r\n      );\r\n      return;\r\n    }\r\n\r\n    const payload = {\r\n      messageId: messageToEdit.id,\r\n      chatRoom: currentRoom,\r\n      editedText: editMessageTextArea.value\r\n    };\r\n    dispatch({\r\n      type: EDIT_MESSAGE,\r\n      payload\r\n    });\r\n    webSocket.send(\r\n      JSON.stringify({\r\n        command: \"editMessage\",\r\n        body: payload\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleClickEdit = message => {\r\n    setMessageToEdit(message);\r\n    setModalVisible(true);\r\n  };\r\n\r\n  return (\r\n    <article id={\"chat-messages\"}>\r\n      {inputMessages &&\r\n        inputMessages.map(message => {\r\n          return (\r\n            <Row className=\"message\">\r\n              <ChatMessage message={message} onClickEdit={handleClickEdit} />\r\n            </Row>\r\n          );\r\n        })}\r\n      <Modal\r\n        title=\"Edit Message\"\r\n        visible={modalVisible}\r\n        onOk={handleModalOK}\r\n        onCancel={() => setModalVisible(false)}\r\n      >\r\n        <TextArea\r\n          id={\"editMessageTextArea\"}\r\n          rows={4}\r\n          showCount={true}\r\n          defaultValue={messageToEdit?.text}\r\n          onPressEnter={handleModalOK}\r\n        />\r\n      </Modal>\r\n    </article>\r\n  );\r\n};\r\n\r\nexport default ChatMessages;\r\n","import React, { useState } from \"react\";\r\nimport { Popover, Space, Row, Col, Input, Button } from \"antd\";\r\nimport \"./Compose.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ON_MESSAGE } from \"../../../actions/type\";\r\nimport * as uuid from \"uuid\";\r\nimport webSocket from \"../../websocket/Websocket\";\r\nimport { messageCensor } from \"../../../helpers/util\";\r\nimport { BAN_BROADCAST } from \"../../room/report/constant\";\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport { Picker } from \"emoji-mart\";\r\nimport { SmileOutlined  } from '@ant-design/icons';\r\n\r\n\r\nconst { TextArea } = Input;\r\n\r\n\r\nconst Compose = () => {\r\n  const dispatch = useDispatch();\r\n  const currentUser = useSelector(state => state.login.user);\r\n  const currentRoom = useSelector(state => state.room.currentRoom);\r\n  const [textAreaText, setTextAreaText] = useState(\"\");\r\n  const handleMessageSend = event => {\r\n    event.preventDefault();\r\n    if (!textAreaText) {\r\n      return;\r\n    }\r\n\r\n    if (!messageCensor(textAreaText)) {\r\n      webSocket.send(\r\n        JSON.stringify({\r\n          command: \"ban\",\r\n          body: {\r\n            username: currentUser.trim(),\r\n            room: currentRoom.trim(),\r\n            source: BAN_BROADCAST\r\n          }\r\n        })\r\n      );\r\n    } else {\r\n      sendMessage();\r\n    }\r\n\r\n    setTextAreaText('');\r\n  };\r\n  const handleMessageChange = event => {\r\n    setTextAreaText(event.target.value);\r\n  };\r\n\r\n  const sendMessage = () => {\r\n    const payload = {\r\n      chatRoom: currentRoom,\r\n      text: textAreaText,\r\n      id: uuid.v4(),\r\n      time: new Date().getTime(),\r\n      sender: currentUser\r\n    };\r\n    dispatch({\r\n      type: ON_MESSAGE,\r\n      payload: {\r\n        ...payload,\r\n        received: true\r\n      }\r\n    });\r\n    webSocket.send(\r\n      JSON.stringify({\r\n        command: \"broadcast\",\r\n        body: payload\r\n      })\r\n    );\r\n  };\r\n\r\n  const [showEmojiPicker, setshowEmojiPicker] = useState(false);\r\n\r\n  const toggleEmojiPicker = () => {\r\n    setshowEmojiPicker(!showEmojiPicker)\r\n  }\r\n\r\n  const emojiHandler = (emoji) => {\r\n    setTextAreaText(textAreaText + emoji.native);\r\n  }\r\n\r\n  const content = (\r\n        <Picker set = 'twitter' perLine = {12} include = {['smileys','people']} onSelect={emojiHandler}/>\r\n  );\r\n\r\n  return (\r\n    <div id={\"compose\"}>\r\n      <Row>\r\n        <TextArea\r\n          allowClear={true}\r\n          id={\"compose-textarea\"}\r\n          rows={4}\r\n          // defaultValue={\"\"}\r\n          value={textAreaText}\r\n          showCount={true}\r\n          onPressEnter={handleMessageSend}\r\n          onChange={handleMessageChange}\r\n        />\r\n      </Row>\r\n      <Space style = {{float:\"right\"}}>\r\n        <Popover content={content}  trigger=\"click\"\r\n                 visible={showEmojiPicker}\r\n                 onVisibleChange={toggleEmojiPicker}\r\n        >\r\n          <Button ><SmileOutlined /></Button>\r\n        </Popover>\r\n          <Button onClick={handleMessageSend}>Send</Button>\r\n      </Space>\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Compose;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Row, Layout } from \"antd\";\r\nimport ChatMessages from \"./ChatMessages\";\r\nimport Compose from \"./Compose\";\r\nimport \"./ChatArea.css\";\r\n\r\nconst { Content, Footer, Header } = Layout;\r\n\r\nconst ChatArea = ({ chatRoom }) => {\r\n  const messages = useSelector(state => {\r\n    return state.message.messages;\r\n  });\r\n\r\n  return (\r\n    <div id={\"chat-area\"}>\r\n      <Layout>\r\n        <Content>\r\n          <ChatMessages inputMessages={messages[chatRoom]} />\r\n        </Content>\r\n        <Footer>\r\n          <Compose />\r\n        </Footer>\r\n      </Layout>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatArea;\r\n","import {Form, Input, Switch, Select, Button, Popover, Menu, Modal} from 'antd';\r\nimport React, {useState} from 'react';\r\nimport {PlusCircleOutlined} from \"@ant-design/icons\";\r\nimport webSocket from \"../websocket/Websocket\";\r\n\r\nconst layout = {\r\n    labelCol: {\r\n        span: 8,\r\n    },\r\n    wrapperCol: {\r\n        span: 16,\r\n    },\r\n};\r\nconst validateMessages = {\r\n    required: '${label} is required!',\r\n};\r\n\r\nconst CreateRoom = (props) => {\r\n    const interests = [];\r\n    const interest_string_list = [\"Traveling\", \"Reading\", \"Music\", \"Sports\", \"Movies\", \"Games\"];\r\n    const {Option} = Select;\r\n    const {visible, setVisible} = props;\r\n    const [interestDisabled, setInterestDisabled] = useState(true);\r\n    for (let i = 0; i < 6; i++) {\r\n        interests.push(<Option value={interest_string_list[i]}>{interest_string_list[i]}</Option>);\r\n    }\r\n    const onFinish = (values) => {\r\n        webSocket.send(\r\n            JSON.stringify({\r\n                    command: \"createRoom\",\r\n                    body: {\r\n                        name: values.name,\r\n                        interests: values.interest,\r\n                        isPrivate: values.switch || false\r\n                    }\r\n                }\r\n            )\r\n        )\r\n        setVisible(false);\r\n    };\r\n\r\n    const handleVisibleChange = visible => {\r\n        setVisible(visible);\r\n    };\r\n    return (\r\n        <Popover placement=\"rightTop\" title={\"Create Room\"}\r\n                 content={<Form {...layout} name=\"nest-messages\" onFinish={onFinish} validateMessages={validateMessages}\r\n                                style={{outerWidth: \"500\"}}>\r\n                     <Form.Item name={\"name\"}\r\n                                label=\"Name\"\r\n                                rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: 'Name is required!',\r\n                                    },\r\n                                    {\r\n                                        pattern: /^[a-zA-Z0-9_]{1,20}$/,\r\n                                        message: 'Name should be 1-20 alphanumeric characters or underscores',\r\n                                    },\r\n                                ]}><Input/>\r\n                     </Form.Item>\r\n                     <Form.Item name=\"switch\" label=\"Private\" valuePropName=\"checked\"><Switch onClick={() => {\r\n                         setInterestDisabled(prevState => !prevState)\r\n                     }}/>\r\n                     </Form.Item>\r\n                     <Form.Item name={\"interest\"}\r\n                                label=\"Interests\"\r\n                                rules={[{required: !interestDisabled}]}>\r\n                         <Select mode=\"multiple\"\r\n                                 allowClear\r\n                                 style={{width: '100%'}}\r\n                                 placeholder=\"Please select\"\r\n                                 disabled={interestDisabled}>{interests}</Select>\r\n                     </Form.Item>\r\n\r\n                     <Form.Item wrapperCol={{...layout.wrapperCol, offset: 8}}>\r\n                         <Button type=\"primary\" htmlType=\"submit\">\r\n                             Submit\r\n                         </Button>\r\n                     </Form.Item>\r\n                 </Form>}\r\n                 trigger=\"click\"\r\n                 visible={visible}\r\n                 onVisibleChange={handleVisibleChange}>\r\n            <span><PlusCircleOutlined/></span>Create\r\n        </Popover>\r\n    );\r\n\r\n};\r\nexport default CreateRoom;\r\n\r\n\r\n","import {Tooltip, Menu, Tag, Button, Dropdown, Col, Popover} from \"antd\";\r\nimport {GroupOutlined} from \"@ant-design/icons\";\r\nimport React, {useState} from \"react\";\r\nimport webSocket from \"../websocket/Websocket\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {JOIN_ROOM} from \"../../actions/type\";\r\n\r\n\r\nconst {SubMenu} = Menu;\r\nconst JoinedRoom = (props) => {\r\n    let keyId = 1;\r\n    const dispatch = useDispatch();\r\n    const {joinedRooms, userList, userName, setReport} = props;\r\n    const report = (reportRoom, reportName) => {\r\n        setReport({visible: true, reportRoom: reportRoom, reportName: reportName})\r\n    }\r\n    const forceToLeave = (name, room) => {\r\n        webSocket.send(\r\n            JSON.stringify({\r\n                    command: \"forceToLeave\",\r\n                    body: {\r\n                        userName: name,\r\n                        roomName: room\r\n                    }\r\n                }\r\n            )\r\n        )\r\n    };\r\n\r\n    const block = (name) => {\r\n        webSocket.send(\r\n            JSON.stringify({\r\n                    command: \"block\",\r\n                    body: {\r\n                        userName: name\r\n                    }\r\n                }\r\n            )\r\n        )\r\n\r\n    }\r\n\r\n    const getRemoveButton = (name, roomName, admin) => {\r\n        if (name === userName || name === admin) return null;\r\n        if (userName === admin) return (<Tooltip title=\"Remove\"><Button style={{marginLeft: '5px'}} ghost = \"true\" size = \"small\" key={name + \"remove\" + keyId++} type=\"primary\" shape=\"circle\"\r\n                                                                        onClick={() => forceToLeave(name, roomName)}>R</Button></Tooltip>)\r\n        return (<Tooltip title=\"Report\"><Button  style={{marginLeft: '5px'}} ghost = \"true\" size = \"small\" type=\"primary\"  shape=\"circle\" key={name + \"report\" + keyId++} onClick={() => {\r\n            report(roomName, name)\r\n        }}>!</Button></Tooltip>)\r\n    }\r\n\r\n    const getBlockButton = (name) => {\r\n        if (name !== userName) return<Tooltip title=\"Block\"> <Button ghost = \"true\" size = \"small\" type=\"primary\" shape=\"circle\"  key={name + \"block\" + keyId++}\r\n                                              onClick={() => block(name)}>B</Button></Tooltip>\r\n        return null\r\n    }\r\n\r\n    const handleSelectedRoom = ({key}) => {\r\n        dispatch({\r\n            type: JOIN_ROOM,\r\n            payload: key\r\n        })\r\n    }\r\n    return (\r\n        <Menu mode=\"inline\" selectedKeys={['']} defaultOpenKeys={['joinedRooms']}>\r\n            <SubMenu key = \"joinedRooms\" title={<span><GroupOutlined/><span>Joined Rooms</span></span>}>\r\n                {\r\n                    joinedRooms.map((name, index) => {\r\n                        return (\r\n\r\n                            <SubMenu key={name} title={name} onTitleClick={handleSelectedRoom}>\r\n                                {userList[index].map(name => {\r\n                                    let color = (userList[index][0] === name) ? \"magenta\" : \"green\";\r\n                                    let tag = (userList[index][0] === name) ? \"Admin\" : \"Member\";\r\n                                    return (\r\n                                        <Menu.Item key={name + keyId++}><Tag color={color}>{tag}</Tag>{name}\r\n                                            {getRemoveButton(name, joinedRooms[index], userList[index][0])}\r\n                                            {getBlockButton(name)}\r\n                                        </Menu.Item>\r\n                                    )\r\n\r\n                                })\r\n                                }\r\n\r\n                            </SubMenu>\r\n                        )\r\n                    })\r\n                }\r\n            </SubMenu>\r\n        </Menu>\r\n    );\r\n\r\n\r\n}\r\nexport default JoinedRoom;","import {Menu, Tag, Popover, Button, Modal} from \"antd\";\r\nimport {CloseCircleOutlined, GroupOutlined, MinusCircleOutlined, PlusCircleOutlined} from \"@ant-design/icons\";\r\nimport React, {useState} from \"react\";\r\nimport {Route} from \"react-router-dom\";\r\nimport CreateRoom from \"./createRoom\";\r\nimport webSocket from \"../websocket/Websocket\";\r\nimport JoinedRoom from \"./joinedRoom\";\r\n\r\nconst {SubMenu} = Menu;\r\n\r\nconst ExitRoom = (props) => {\r\n    const {joinedRooms} = props;\r\n    const onFinish = (values) => {\r\n        webSocket.send(\r\n            JSON.stringify({\r\n                    command: \"exitRoom\",\r\n                    body: {\r\n                        name: values.key\r\n                    }\r\n                }\r\n            )\r\n        )\r\n    };\r\n    return (\r\n        <Menu mode=\"inline\" onClick={(e) => {\r\n            onFinish(e)\r\n        }}>\r\n            <SubMenu title={<span><span><MinusCircleOutlined/></span>Exit</span>}>\r\n                {\r\n                    joinedRooms.map(name => {\r\n                        return (\r\n                            <Menu.Item key={name}>{name}</Menu.Item>\r\n                        )\r\n                    })\r\n                }\r\n            </SubMenu>\r\n        </Menu>\r\n    );\r\n}\r\nexport default ExitRoom;","import {Menu, Tag, Popover, Button, Modal} from \"antd\";\r\nimport {CloseCircleOutlined, GroupOutlined, MinusCircleOutlined, PlusCircleOutlined} from \"@ant-design/icons\";\r\nimport React, {useState} from \"react\";\r\nimport {Route} from \"react-router-dom\";\r\nimport CreateRoom from \"./createRoom\";\r\nimport webSocket from \"../websocket/Websocket\";\r\nimport JoinedRoom from \"./joinedRoom\";\r\n\r\n\r\nconst ExitAllRooms = () => {\r\n    const onFinish = () => {\r\n        webSocket.send(\r\n            JSON.stringify({\r\n                    command: \"exitAllRoom\",\r\n                    body: {\r\n                    }\r\n                }\r\n            )\r\n        )\r\n    };\r\n\r\n    return (\r\n        <Menu mode=\"inline\" selectedKeys={['']} onClick={onFinish}>\r\n            <Menu.Item><span><CloseCircleOutlined/></span>Exit All</Menu.Item>\r\n        </Menu>\r\n    );\r\n}\r\nexport default ExitAllRooms;","import {Menu} from \"antd\";\r\nimport {LockOutlined} from \"@ant-design/icons\";\r\nimport {GroupOutlined} from \"@ant-design/icons\";\r\nimport React from \"react\";\r\nimport webSocket from \"../websocket/Websocket\";\r\n\r\nconst {SubMenu} = Menu;\r\nconst AllRooms = (props) => {\r\n    const {allRooms, isPublic} = props;\r\n    const onFinish = (values) => {\r\n        webSocket.send(\r\n            JSON.stringify({\r\n                    command: \"joinRoom\",\r\n                    body: {\r\n                        name: values.key\r\n                    }\r\n                }\r\n            )\r\n        )\r\n    };\r\n\r\n    return (\r\n        <Menu mode=\"inline\"  onClick={(e) => {\r\n            onFinish(e)\r\n        }} defaultOpenKeys={['allRooms']} >\r\n            <SubMenu key=\"allRooms\" title={<span><GroupOutlined/><span>All Rooms</span></span>}>\r\n                {\r\n                    allRooms.map((name, index) => {\r\n                        return (\r\n\r\n                            <Menu.Item key={name}><span>{isPublic[index] === \"false\" ?\r\n                                <span><LockOutlined/></span> : null}{name}</span></Menu.Item>\r\n                        );\r\n                    })\r\n\r\n                }\r\n            </SubMenu>\r\n        </Menu>\r\n    );\r\n\r\n\r\n}\r\nexport default AllRooms;","import { Modal, Button } from 'antd';\r\nimport React, { useState } from \"react\";\r\nimport webSocket from \"../../websocket/Websocket\";\r\nimport { Radio, Input } from 'antd';\r\nimport './reportForm.css'\r\nimport {reportReasons} from './constant'\r\n\r\nconst ReportForm = (props) => {\r\n    const [value, setValue] = useState(undefined);\r\n    const [checkedReason, setCheckedReason] = useState(\"\");\r\n    const [okButtonDisabled, setOkButtonDisabled]  = useState(true);\r\n    const {report, setReport} = props;\r\n\r\n    const handleOk = () => {\r\n       setReport({...report, visible: false})\r\n        webSocket.send(\r\n            JSON.stringify({\r\n                    command: \"report\",\r\n                    body: {\r\n                        reportedUsername: report.reportName,\r\n                        reportedReason: checkedReason,\r\n                        reportedRoom: report.reportRoom,\r\n                    }\r\n                }\r\n            )\r\n        )\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        setReport({...report, visible: false})\r\n    };\r\n\r\n    const onChange = e => {\r\n        console.log('radio checked', e.target.value);\r\n        setOkButtonDisabled(false);\r\n        setValue(e.target.value);\r\n\r\n        if (e.target.value !== 3) {\r\n            setCheckedReason(reportReasons[e.target.value]);\r\n        }\r\n    };\r\n\r\n    const onChangeInput = e => {\r\n        console.log('input', e.target.value);\r\n\r\n        if (value === 3) {\r\n            setCheckedReason(e.target.value);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Modal\r\n                title=\"Report\"\r\n                visible={report.visible}\r\n                onOk={handleOk}\r\n                onCancel={handleCancel}\r\n                okButtonProps={{disabled: okButtonDisabled}}\r\n            >\r\n                <p>Please Choose Your Reasons</p>\r\n                <Radio.Group class=\"radio-group\" onChange={onChange} value={value}>\r\n                    <Radio  class=\"radio-option\" value={0}>\r\n                        {reportReasons[0]}\r\n                    </Radio>\r\n                    <Radio  class=\"radio-option\" value={1}>\r\n                        {reportReasons[1]}\r\n                    </Radio>\r\n                    <Radio  class=\"radio-option\" value={2}>\r\n                        {reportReasons[2]}\r\n                    </Radio>\r\n                    <Radio  class=\"radio-option\" value={3}>\r\n                        More...\r\n                        {value === 3 ? <Input style={{ width: 100, marginLeft: 10 }} onChange={onChangeInput} /> : null}\r\n                    </Radio>\r\n                </Radio.Group>\r\n            </Modal>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default ReportForm","import { Modal, Button } from 'antd';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport webSocket from \"../../websocket/Websocket\";\r\nimport {BAN_REPORT} from \"./constant\";\r\n\r\nconst ReportAdminForm = (props) => {\r\n    const {isReportAdminVisible, reportedReason, reportedUsername, reportedRoom} = props.reportStore;\r\n    const [visible, setVisible] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setVisible(isReportAdminVisible);\r\n    }, [props.reportStore])\r\n\r\n    const handleOk = e => {\r\n        setVisible(false);\r\n        webSocket.send(\r\n            JSON.stringify({\r\n                    command: \"ban\",\r\n                    body: {\r\n                        username: reportedUsername.trim(),\r\n                        room: reportedRoom.trim(),\r\n                        source: BAN_REPORT\r\n                    }\r\n                }\r\n            )\r\n        )\r\n    };\r\n\r\n    const handleCancel = e => {\r\n        setVisible(false);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Modal\r\n                title=\"Handle Report Message\"\r\n                visible={visible}\r\n                onOk={handleOk}\r\n                onCancel={handleCancel}\r\n                okText={\"Approve\"}\r\n                cancelText={\"Disapprove\"}\r\n            >\r\n                <p>Reported User: {reportedUsername}</p>\r\n                <p>{reportedReason}</p>\r\n            </Modal>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return { reportStore: state.report }\r\n};\r\n\r\nexport default connect(mapStateToProps, {})(ReportAdminForm);","import {Menu, Button, Modal, message} from \"antd\";\r\nimport React, {useState, useMemo, useEffect} from \"react\";\r\nimport CreateRoom from \"./createRoom\";\r\nimport JoinedRoom from \"./joinedRoom\";\r\nimport ExitRoom from \"./exitRoom\";\r\nimport ExitAllRooms from \"./exitAllRooms\";\r\nimport AllRooms from \"./allRooms\";\r\nimport webSocket from \"../websocket/Websocket\";\r\nimport {connect} from \"react-redux\";\r\nimport ReportForm from \"./report/reportForm\";\r\nimport ReportAdminForm from \"./report/reportAdminForm\";\r\nimport notification from \"../notification\";\r\n\r\nconst Index = (props) => {\r\n    const {room} = props;\r\n    const [joinedRooms, setJoinedRooms] = useState([]);\r\n    const [userList, setUserList] = useState(() => [[]]);\r\n    const [allRooms, setAllRooms] = useState(() => []);\r\n    const [visible, setVisible] = useState(false);\r\n    const [userName, setUserName] = useState();\r\n    const [isPublic, setIsPublic] = useState(() => []);\r\n    const [report, setReport] = useState({visible: false, reportRoom: null, reportName: null})\r\n    const handleClick = (e) => {\r\n        if (e.key === \"create\") setVisible(true);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (room.msg == null) {\r\n            if (room.joinedRoom) setJoinedRooms(room.joinedRoom);\r\n            if (room.userList) setUserList(room.userList);\r\n            if (room.allRooms) setAllRooms(room.allRooms);\r\n            if (room.userName) setUserName(room.userName);\r\n            if (room.isPublic) setIsPublic(room.isPublic);\r\n\r\n        } else {\r\n            if (room.type === \"err\") notification.error(room.msg);\r\n            else if (room.type === \"info\") notification.info(room.msg);\r\n            else notification.success(room.msg);\r\n\r\n        }\r\n    }, [room])\r\n\r\n\r\n    return (\r\n        <Menu mode=\"inline\" onClick={handleClick} selectedKeys={['']} defaultOpenKeys={['allRooms', 'joinedRooms']}>\r\n            <Menu.Item key=\"create\">\r\n                <CreateRoom visible={visible} setVisible={setVisible}/>\r\n            </Menu.Item>\r\n            {/*<ExitRoom joinedRooms={joinedRooms}/>*/}\r\n            <ExitAllRooms/>\r\n            <JoinedRoom joinedRooms={joinedRooms} userList={userList} userName={userName} setReport={setReport}/>\r\n            <AllRooms allRooms={allRooms} isPublic={isPublic}/>\r\n            <ReportForm report={report} setReport={setReport}/>\r\n            <ReportAdminForm/>\r\n        </Menu>\r\n\r\n\r\n    )\r\n}\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {room: state.room}\r\n};\r\n\r\nexport default connect(mapStateToProps, {})(Index);","import {React, useState} from \"react\";\r\nimport { Modal, Input} from \"antd\";\r\nimport webSocket from \"../../websocket/Websocket\";\r\nimport {messageCensor} from \"../../../helpers/util\";\r\nimport {BAN_PRIVATEMSG} from \"../../room/report/constant\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\nconst Message = (props) => {\r\n\r\n    const [value, setValue] = useState(\"\");\r\n    const {userName, visible, setVisible} = props;\r\n    const { TextArea } = Input;\r\n    const currentUser = useSelector(state => state.login.user);\r\n    const handleOk = () => {\r\n        if (!messageCensor(value)) {\r\n            webSocket.send(\r\n                JSON.stringify({\r\n                    command: \"ban\",\r\n                    body: {\r\n                        username: currentUser.trim(),\r\n                        room: null,\r\n                        source: BAN_PRIVATEMSG\r\n                    }\r\n                })\r\n            )\r\n        }\r\n        else {\r\n            webSocket.send(\r\n                JSON.stringify({\r\n                    command: \"privateMessage\",\r\n                    body: {\r\n                        name: userName,\r\n                        info: value\r\n                    }\r\n                })\r\n            )\r\n        }\r\n        setValue(\"\");\r\n        setVisible(false);\r\n    }\r\n\r\n    const onChange = ({ target: { value } }) => {\r\n        setValue(value);\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            title={`To ${userName}`}\r\n            visible={visible}\r\n            onOk={handleOk}\r\n            onCancel={() => {setValue(\"\"); setVisible(false)}}\r\n        >\r\n            <TextArea value={value}\r\n                   onChange={onChange}/>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default Message;","import {React, useState} from \"react\";\r\nimport { List, Avatar, Button } from \"antd\";\r\nimport webSocket from \"../../websocket/Websocket\";\r\nimport colorHelper from \"../../../helpers/color-user-helper\";\r\nimport Message from \"./message\";\r\nimport {connect, useSelector} from \"react-redux\";\r\nimport ChatMessage from \"../chat-area/ChatMessage\";\r\n\r\n\r\nconst UserList = (props) => {\r\n\r\n    const [visible, setVisible] = useState(false);\r\n    const [userName, setUserName] = useState(\"\");\r\n\r\n\r\n    const allUsers = useSelector( state => state.userList.allUserList);\r\n    const currentUser = useSelector (state => state.login.user);\r\n    const getDisplayName = sender => {\r\n        return sender.split(\"_\").map(name => name[0]);\r\n    };\r\n    console.log(currentUser)\r\n\r\n    return (\r\n    <div>\r\n        <Message userName={userName} visible={visible} setVisible={setVisible}/>\r\n            <List\r\n                style = {{width:\"100%\", height:\"100%\",position:\"absolute\", overflow:\"auto\"}}\r\n                itemLayout=\"horizontal\"\r\n                dataSource={allUsers}\r\n                renderItem={item => (\r\n                    <List.Item style={{ padding: \"15px\" }}>\r\n                        <List.Item.Meta\r\n                            avatar={\r\n                                <Avatar\r\n                                    style={{\r\n                                        backgroundColor: colorHelper(\r\n                                            item.name\r\n                                        ),\r\n                                        verticalAlign: \"middle\"\r\n                                    }}\r\n                                    size=\"large\"\r\n                                    gap={1}\r\n                                >\r\n                                    {getDisplayName(item.name)}\r\n                                </Avatar>\r\n                            }\r\n                            description={item.name}\r\n                            title={item.school}\r\n                        />\r\n                        {item.name != currentUser?\r\n                            <Button\r\n                                type=\"primary\"\r\n                                shape=\"round\"\r\n                                size=\"small\"\r\n                                onClick={() => {setUserName(item.name); setVisible(true)}}\r\n                            >\r\n                                Chat!\r\n                            </Button>\r\n                            :   <Button\r\n                                type=\"primary\"\r\n                                shape=\"round\"\r\n                                size=\"small\"\r\n                                disabled = {true}\r\n                            >\r\n                                Chat!\r\n                            </Button>}\r\n\r\n\r\n                    </List.Item>\r\n                )}\r\n            />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserList;\r\n","import { Popover, Button, Input, Space } from 'antd';\r\nimport React, {useState, useEffect} from 'react';\r\nimport { connect , useSelector} from 'react-redux';\r\nimport webSocket from \"../../websocket/Websocket\"\r\nimport notification from \"../../notification\";\r\nimport {JOIN_ROOM} from \"../../../actions/type\";\r\n\r\n\r\nconst InviteForm = (props) => {\r\n    const {selectedChatRoom, rooms} = props;\r\n    const [name, setName] = useState(\"\");\r\n    const [joinedRooms, setJoinedRooms] = useState([]);\r\n    const currentUser = useSelector(state => state.login.user);\r\n    const [visible, setVisible] = useState(false);\r\n\r\n    const hide = () => {\r\n        setVisible(false)\r\n    }\r\n\r\n\r\n\r\n    const handleVisibleChange = e => {\r\n        setVisible(e)\r\n    }\r\n\r\n    const onChange = e => {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (rooms.msg == null) {\r\n            if (rooms.joinedRoom) setJoinedRooms(rooms.joinedRoom);\r\n        } else {\r\n\r\n        }\r\n    }, [rooms])\r\n\r\n    const onFinish = (room, user) => {\r\n        setVisible(false)\r\n        if (room != null && user != null) {\r\n            webSocket.send(\r\n                JSON.stringify({\r\n                    command: \"invite\",\r\n                    body: {\r\n                        currentUser: currentUser,\r\n                        inviteUserName: user,\r\n                        invitedRoom: room\r\n                    }\r\n                })\r\n            )\r\n        }\r\n    };\r\n\r\n\r\n    const content = (\r\n        <Space align=\"center\">\r\n            <Input placeholder=\"Username\" onChange={onChange}/>\r\n            <Button type=\"primary\" onClick={() => onFinish(selectedChatRoom, name)}>Invite</Button>\r\n        </Space>\r\n    );\r\n\r\n    return (\r\n\r\n        <Popover content={content} title=\"Invite your friend!\" trigger=\"click\"\r\n            visible={visible}\r\n            onVisibleChange={handleVisibleChange}\r\n        >\r\n            <Button>Invite</Button>\r\n        </Popover>\r\n\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {rooms: state.room}\r\n};\r\n\r\nexport default connect(mapStateToProps, {})(InviteForm);","import React, {useEffect, useState} from \"react\";\r\nimport {Layout, Row, Col} from \"antd\";\r\nimport {Space, Button, Popover, notification, Avatar, Drawer, List} from \"antd\";\r\nimport {UserOutlined} from '@ant-design/icons';\r\nimport {useHistory} from \"react-router-dom\";\r\nimport ChatArea from \"./chat-area/ChatArea\";\r\nimport Room from \"../room\";\r\nimport UserList from \"./userList\";\r\nimport ReportForm from \"../room/report/reportForm\";\r\nimport ReportAdminForm from \"../room/report/reportAdminForm\";\r\nimport webSocket from \"../websocket/Websocket\";\r\nimport {connect, useDispatch, useSelector} from \"react-redux\";\r\nimport notifications from \"../notification\";\r\nimport InviteForm from \"./inviteForm\";\r\nimport Message from \"./userList/message\";\r\nimport './index.css';\r\nimport {EXIT_ROOM, JOIN_ROOM} from \"../../actions/type\";\r\n\r\nconst {Header, Content, Footer, Sider} = Layout;\r\nconst Chat = props => {\r\n    const history = useHistory();\r\n    const {dispatch, logIn, priMsg} = props;\r\n    const selectedChatRoom = useSelector(state => state.room.currentRoom);\r\n    const [visible, setVisible] = useState(false);\r\n    const [drawer_visible, setDrawerVisible] = useState(false);\r\n    const exitDispatch = useDispatch();\r\n\r\n    const [userName, setUserName] = useState(\"\");\r\n    const userList = useSelector(state => {\r\n        if (!state.room.userList || !state.room.joinedRoom) {\r\n            return null;\r\n        }\r\n        return state.room.userList[state.room.joinedRoom.indexOf(selectedChatRoom)];\r\n    });\r\n\r\n    const currentUser = useSelector(state => state.login.user);\r\n    const allUsers = useSelector(state => state.userList.allUserList);\r\n    const profile = allUsers.find(user => user.name === currentUser);\r\n    var data;\r\n    if (profile != undefined) {\r\n        var myInterests = '';\r\n        for (var i = 0; i < profile.interest.length; i++) {\r\n            if (i > 0) {\r\n                myInterests += ', ';\r\n            }\r\n            myInterests += profile.interest[i];\r\n        }\r\n        data = [\r\n            {\r\n                title: 'Name',\r\n                description: profile.name,\r\n            },\r\n            {\r\n                title: 'Age',\r\n                description: profile.age,\r\n            },\r\n            {\r\n                title: 'School',\r\n                description: profile.school,\r\n            },\r\n            {\r\n                title: 'Interests',\r\n                description: myInterests,\r\n            },\r\n        ];\r\n    }\r\n\r\n\r\n    const mes = (description, userName) => {\r\n        return (\r\n            <div>\r\n                <div className=\"message\">\r\n                    {description}\r\n                </div>\r\n                <div className=\"message\">\r\n                    <Button onClick={() => handleReply(userName)}>Reply</Button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const handleReply = (userName) => {\r\n        setUserName(userName);\r\n        setVisible(true);\r\n    }\r\n\r\n    const showDrawer = () => {\r\n        setDrawerVisible(true);\r\n    };\r\n\r\n    const onClose = () => {\r\n        setDrawerVisible(false);\r\n    };\r\n\r\n    const exitRoom = () => {\r\n\r\n        return (<Button className=\"exitButton\" onClick={() => {\r\n            exitDispatch({\r\n                type: EXIT_ROOM,\r\n                payload: null\r\n            })\r\n            webSocket.send(\r\n                JSON.stringify({\r\n                        command: \"exitRoom\",\r\n                        body: {\r\n                            name: selectedChatRoom\r\n                        }\r\n                    }\r\n                )\r\n            )\r\n\r\n        }}>Exit</Button>)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (priMsg.message !== null) {\r\n            notification.info({\r\n                message: `${priMsg.sender} sends you a message`,\r\n                description: mes(priMsg.message.info, priMsg.sender),\r\n                duration: 5,\r\n                styles: {paddingTop: '10px'}\r\n            });\r\n        } else if (priMsg.feedback !== null) {\r\n            if (priMsg.feedback.indexOf(\"Sorry\") < 0) {\r\n                notifications.success(priMsg.feedback);\r\n            } else {\r\n                notifications.error(priMsg.feedback);\r\n            }\r\n        }\r\n    }, [priMsg]);\r\n\r\n    return (\r\n        <Layout style={{height: \"100vh\"}}>\r\n            <Message userName={userName} visible={visible} setVisible={setVisible}/>\r\n            <Sider width=\"300px\" theme=\"light\" style={{overflowY: 'auto'}}>\r\n                <Room/>\r\n            </Sider>\r\n            <Layout style={{overFlow: \"hidden\"}}>\r\n                <Header\r\n                    style={{\r\n                        padding: 0,\r\n                        backgroundColor: \"white\",\r\n                        //borderLeft: \"2px solid rgba(0, 0, 0, 0.06)\"\r\n                    }}\r\n                >\r\n                    {selectedChatRoom && (\r\n                        <span\r\n                            id={\"chat-area-header-room-name\"}\r\n                            style={{fontSize: \"larger\", fontWeight: \"bolder\"}}\r\n                        >\r\n              {selectedChatRoom || \"\"}\r\n            </span>\r\n                    )}\r\n                    {selectedChatRoom && (\r\n                        <span\r\n                            id={\"chat-area-header-user-count\"}\r\n                            style={{fontSize: \"medium\", marginLeft: \"20px\"}}\r\n                        >\r\n              {(userList && `(${userList.length})`) || \"\"}\r\n            </span>\r\n                    )}\r\n                    <Space style={{float: 'right'}}\r\n                           size=\"middle\">\r\n                        <div>\r\n\r\n                            {selectedChatRoom != null ? <> {exitRoom()}<InviteForm\r\n                                selectedChatRoom={selectedChatRoom}/> </> : null}\r\n                        </div>\r\n\r\n\r\n                        <Button type=\"primary\" shape=\"circle\" icon={<UserOutlined/>} onClick={showDrawer}/>\r\n                        <Drawer\r\n                            title=\"User Profile\"\r\n                            placement=\"left\"\r\n                            closable={false}\r\n                            onClose={onClose}\r\n                            visible={drawer_visible}\r\n                        >\r\n                            <List\r\n                                itemLayout=\"horizontal\"\r\n                                dataSource={data}\r\n                                renderItem={item => (\r\n                                    <List.Item>\r\n                                        <List.Item.Meta\r\n                                            title={item.title}\r\n                                            description={item.description}\r\n                                        />\r\n                                    </List.Item>\r\n                                )}\r\n                            />\r\n\r\n                            <Button\r\n                                type=\"primary\"\r\n                                shape=\"round\"\r\n                                size=\"small\"\r\n                                onClick={() => {\r\n                                    webSocket.send(\r\n                                        JSON.stringify({\r\n                                            command: \"logout\",\r\n                                            body: {}\r\n                                        })\r\n                                    );\r\n                                }}\r\n                            >\r\n                                Logout\r\n                            </Button>\r\n\r\n                        </Drawer>\r\n\r\n                    </Space>\r\n                </Header>\r\n                <Content style={{margin: \"24px 16px 0\"}}>\r\n                    <Row style={{height: \"100%\"}}>\r\n                        <Col span={17}>\r\n                            <div\r\n                                className=\"site-layout-background\"\r\n                                style={{minHeight: 360, height: \"100%\"}}\r\n                            >\r\n                                {selectedChatRoom && <ChatArea chatRoom={selectedChatRoom}/>}\r\n                            </div>\r\n                        </Col>\r\n                        <Col\r\n                            span={7}\r\n                            style={{borderLeft: \"2px solid rgba(0, 0, 0, 0.06)\"}}\r\n                        >\r\n                            {UserList()}\r\n                            {/*{ReportForm()}*/}\r\n                        </Col>\r\n                    </Row>\r\n                </Content>\r\n                {/*TEMP FOR Report*/}\r\n                {/*<ReportAdminForm report={report}/>*/}\r\n                <Footer style={{textAlign: \"center\"}}>\r\n                    Chat App 2020 Created by Sammy the Owl\r\n                </Footer>\r\n            </Layout>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {logIn: state.login, priMsg: state.priMessage};\r\n};\r\n\r\nexport default connect(mapStateToProps, {})(Chat);\r\n","import {message} from 'antd';\r\nimport {SIGN_IN, SIGN_OUT, ON_MESSAGE, CREATE_ROOM, RESET, ROOM, ON_REPORT, PRI_MESSAGE, SETALLUSERS} from './type';\r\n\r\nvar mesId = 0;\r\n\r\nexport const onMessage = (messages) =>\r\n    dispatch => {\r\n        const data = JSON.parse(messages.data);\r\n        switch (data.section) {\r\n            case \"login\":\r\n                if (data.type === \"err\") {\r\n                    dispatch({type: SIGN_IN, payload: {mesId: mesId++, isSignedIn: false, user: null, msg: data.msg}});\r\n                } else {\r\n                    dispatch({\r\n                        type: SIGN_IN,\r\n                        payload: {mesId: mesId++, isSignedIn: true, user: data.msg, msg: data.msg}\r\n                    });\r\n                }\r\n                break;\r\n            case \"logout\":\r\n                dispatch({type: SIGN_OUT, payload: {mesId: mesId++, isSignedIn: false, user: null, msg: data.msg}});\r\n                break;\r\n            case \"room\":\r\n                dispatch({\r\n                    type: ROOM,\r\n                    payload: {\r\n                        request: data.request,\r\n                        type: data.type,\r\n                        msg: data.msg,\r\n                        param1: data.param1,\r\n                        param2: data.param2,\r\n                        param3: data.param3,\r\n                        param4: data.param4,\r\n                        param5: data.param5\r\n                    }\r\n                });\r\n                break;\r\n            case \"report\":\r\n                const body = JSON.parse(data.msg);\r\n                dispatch({\r\n                    type: ON_REPORT,\r\n                    payload: {\r\n                        reportedUsername: body.reportedUsername,\r\n                        reportedReason: body.reportedReason,\r\n                        reportedRoom: body.reportedRoom\r\n                    }\r\n                });\r\n                break;\r\n            case \"message\":\r\n                const type = data.request;\r\n                const payload = JSON.parse(data.msg);\r\n                dispatch({ type, payload});\r\n                break;\r\n            case \"privateMessage\":\r\n                if(data.request === \"priMsg_feedback\") {\r\n                    dispatch({type: PRI_MESSAGE, payload: null, sender: null, feedback: data.msg});\r\n                    break;\r\n                }\r\n                const sender = data.request;\r\n                //const payload = JSON.parse(data.msg);\r\n                dispatch({type: PRI_MESSAGE, payload: JSON.parse(data.msg), sender: sender, feedback: null});\r\n                break;\r\n            case \"setallusers\":\r\n                dispatch({\r\n                    type: SETALLUSERS,\r\n                    payload: JSON.parse(data.msg)\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport {connect} from \"react-redux\";\r\nimport {message} from \"antd\";\r\n\r\nconst PrivateRoute = ({component: Component, ...props}) => {\r\n    return <Route {...props} render={() => {\r\n        const login = props.logInStore.isSignedIn;\r\n        if (login){\r\n            return <Component />\r\n        } else {\r\n            return <Redirect to={{\r\n                pathname: '/'\r\n            }}/>\r\n        }\r\n    }}/>\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return { logInStore: state.login }\r\n};\r\n\r\nexport default connect(mapStateToProps, {})(PrivateRoute);\r\n","import './App.css';\r\nimport React ,{useRef} from 'react'\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\r\nimport Login from './components/login/login'\r\nimport Chat from './components/chat/index'\r\nimport { createBrowserHistory } from 'history'\r\nimport { useEffect } from 'react/cjs/react.production.min'\r\nimport webSocket from \"./components/websocket/Websocket\"\r\nimport { onMessage } from './actions/index'\r\nimport { connect } from 'react-redux'\r\nimport {Modal} from \"antd\";\r\nimport PrivateRoute from \"./auth/privateRoute\";\r\n\r\nconst history = createBrowserHistory();\r\n\r\nconst App = (props) => {\r\n    const {dispatch, message} = props;\r\n\r\n    webSocket.onopen = () => {\r\n      console.log(\"connected\");\r\n    }\r\n\r\n    webSocket.onmessage = (message) => {\r\n      console.log(message);\r\n      props.onMessage(message);\r\n    }\r\n\r\n    webSocket.onclose = () => {\r\n        Modal.error({content: \"Websocket disconnected, please reenter the chat app\"});\r\n    }\r\n\r\n    return (\r\n    <div className=\"App\">\r\n       <Router history={history}>\r\n        <Switch>\r\n          <Route path=\"/\" exact component={Login} />\r\n          <PrivateRoute path=\"/chat\" exact component={Chat}/>\r\n          {/*<Route path=\"/chat\" exact component={Chat}/>*/}\r\n        </Switch>\r\n      </Router> \r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return { message: state.message }\r\n};\r\n\r\nexport default connect(mapStateToProps, { onMessage })(App);\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { SIGN_IN, SIGN_OUT } from '../actions/type';\r\nimport userEvent from \"@testing-library/user-event\";\r\n\r\nconst INTIAL_STATE = {\r\n  isSignedIn: null,\r\n  user: null,\r\n  mesId: 0,\r\n  msg: null\r\n};\r\n\r\nexport default (state = INTIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case SIGN_IN:\r\n      if (action.payload.isSignedIn === true)\r\n        return { ...state, isSignedIn: true, user: action.payload.user, mesId: action.payload.mesId, msg: action.payload.msg };\r\n      else\r\n        return { ...state, isSignedIn: false, user: null, mesId: action.payload.mesId, msg: action.payload.msg};\r\n    case SIGN_OUT:\r\n      return { ...state, isSignedIn: null, user: null, mesId: action.payload.mesId, msg: action.payload.msg };\r\n    default:\r\n      return state;\r\n  }\r\n};","import {\r\n  ON_MESSAGE,\r\n  DELETE_MESSAGE,\r\n  EDIT_MESSAGE,\r\n  RECALL_MESSAGE\r\n} from \"../actions/type\";\r\n\r\nconst INITIAL_STATE = {\r\n  messages: {}\r\n};\r\n\r\nexport default function (state = INITIAL_STATE, action)  {\r\n  switch (action.type) {\r\n    case ON_MESSAGE: {\r\n      const { messages } = state;\r\n      const { id, text, time, sender, chatRoom, received } = action.payload;\r\n      if (!messages[chatRoom]) {\r\n        messages[chatRoom] = [];\r\n      }\r\n      messages[chatRoom].push({\r\n        id,\r\n        text,\r\n        time,\r\n        sender,\r\n        received\r\n      });\r\n      return { ...state, messages: { ...messages } };\r\n    }\r\n    case DELETE_MESSAGE: {\r\n      const { messages } = state;\r\n      const { messageId, chatRoom } = action.payload;\r\n      const newChatRoomMessages = messages[chatRoom].filter(\r\n        m => m.id !== messageId\r\n      );\r\n      const newMessages = { ...messages };\r\n      newMessages[chatRoom] = newChatRoomMessages;\r\n      return {\r\n        ...state,\r\n        messages: newMessages\r\n      };\r\n    }\r\n    case RECALL_MESSAGE: {\r\n      const { messages } = state;\r\n      const { messageId, chatRoom, recallTime } = action.payload;\r\n      const newChatRoomMessages = messages[chatRoom].map(m => {\r\n        if (m.id === messageId) {\r\n          m.isRecalled = true;\r\n          m.recallTime = recallTime;\r\n          m.text = \"\";\r\n        }\r\n        return m;\r\n      });\r\n      const newMessages = { ...messages };\r\n      newMessages[chatRoom] = newChatRoomMessages;\r\n      return {\r\n        ...state,\r\n        messages: newMessages\r\n      };\r\n    }\r\n    case EDIT_MESSAGE: {\r\n      const { messages } = state;\r\n      const { messageId, chatRoom, editedText } = action.payload;\r\n      const newChatRoomMessages = messages[chatRoom].map(m => {\r\n        if (m.id === messageId) {\r\n          m.text = editedText;\r\n        }\r\n        return m;\r\n      });\r\n      const newMessages = { ...messages };\r\n      newMessages[chatRoom] = newChatRoomMessages;\r\n      return {\r\n        ...state,\r\n        messages: newMessages\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { SETALLUSERS } from '../actions/type';\r\n\r\nconst INITIAL_STATE = {\r\n  allUserList : []\r\n}\r\n\r\n\r\nexport default (state =  INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case SETALLUSERS:\r\n      console.log(action.payload)\r\n      return {...state, allUserList: action.payload}\r\n    default:\r\n      return state;\r\n  }\r\n}","import {ROOM, JOIN_ROOM, EXIT_ROOM} from \"../actions/type\";\r\nimport {act} from \"@testing-library/react\";\r\n\r\nconst INTIAL_STATE = {\r\n    request: null,\r\n    type: null,\r\n    msg: null,\r\n    currentRoom: null,\r\n    joinedRoom:[],\r\n    userList: [[]],\r\n    allRooms: [],\r\n    isPublic: []\r\n};\r\n\r\nexport default (state = INTIAL_STATE, action) => {\r\n    switch (action.type) {\r\n        case ROOM:\r\n           let selectedRoom = state.currentRoom;\r\n           if(action.payload.param1 === \"[]\") selectedRoom = null;\r\n            return {\r\n                request: action.payload.request,\r\n                type: action.payload.type,\r\n                msg: action.payload.msg,\r\n                joinedRoom: parse(action.payload.param1) || state.joinedRoom,\r\n                userList: parseNestedList(action.payload.param1, action.payload.param2) || state.userList,\r\n                allRooms: parse(action.payload.param3) || state.allRooms,\r\n                userName: action.payload.param4 || state.userName,\r\n                isPublic: parse(action.payload.param5) || state.isPublic,\r\n                currentRoom: selectedRoom\r\n            };\r\n        case JOIN_ROOM: {\r\n            return {\r\n                ...state,\r\n                msg: null,\r\n                currentRoom: action.payload\r\n            }\r\n        }\r\n        case EXIT_ROOM:{\r\n            return {\r\n                ...state,\r\n                msg:null,\r\n                currentRoom: action.payload\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst parse = (value)=>{\r\n    if (value) {\r\n        if(value === \"[]\") return [];\r\n        let v = value.substring(1, value.length - 1);\r\n        return v.split(\", \");\r\n    }\r\n    return null;\r\n}\r\n\r\nconst parseNestedList = (param1, value) =>{\r\n    if(value) {\r\n        if(value === \"[]\") return [];\r\n        let length = parse(param1).length;\r\n        let list = []\r\n        let v = value.substring(1, value.length - 1)\r\n        for(let i = 0; i < length; i++){\r\n            let start = v.indexOf(\"[\");\r\n            let end = v.indexOf(\"]\");\r\n            let ele = v.substring(start + 1, end).split(\", \");\r\n            list.push(ele);\r\n            v = v.substring(end + 1);\r\n        }\r\n        return list;\r\n    }\r\n    return null;\r\n}\r\n\r\n\r\n","import {ON_REPORT} from '../actions/type';\r\n\r\nconst INITIAL_STATE = {\r\n    isReportAdminVisible: false,\r\n    reportedUsername:\"\",\r\n    reportedReason: \"\",\r\n    reportedRoom:\"\"\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch (action.type) {\r\n        case ON_REPORT:\r\n            return { ...state, isReportAdminVisible: true, reportedReason: action.payload.reportedReason,\r\n                reportedUsername: action.payload.reportedUsername, reportedRoom: action.payload.reportedRoom};\r\n        default:\r\n            return state;\r\n    }\r\n};","import {PRI_MESSAGE, RESET, SIGN_OUT} from '../actions/type';\r\nimport userEvent from \"@testing-library/user-event\";\r\n\r\nconst INTIAL_STATE = {\r\n    message: null,\r\n    sender: null,\r\n    feedback: null\r\n};\r\n\r\nexport default (state = INTIAL_STATE, action) => {\r\n    switch (action.type) {\r\n        case PRI_MESSAGE:\r\n            return { ...state, sender: action.sender, message: action.payload, feedback: action.feedback };\r\n        case SIGN_OUT:\r\n            return {...state, ...INTIAL_STATE};\r\n        default:\r\n            return state;\r\n    }\r\n};","import { message } from 'antd';\r\nimport { combineReducers } from 'redux';\r\nimport loginReducer from './loginReducer';\r\nimport messageReducer from './messageReducer';\r\nimport userListReducer from './userListReducer';\r\nimport roomReducer from \"./roomReducer\";\r\nimport reportReducer from \"./reportReducer\";\r\nimport priMessageReducer from \"./priMessageReducer\";\r\n\r\n\r\nexport default combineReducers({\r\n  login: loginReducer,\r\n  message: messageReducer,\r\n  userList: userListReducer,\r\n  room: roomReducer,\r\n  report: reportReducer,\r\n  priMessage: priMessageReducer\r\n});","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport reduxThunk from 'redux-thunk';\r\nimport reducers from './reducers';\r\nimport 'antd/dist/antd.css';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, /* preloadedState, */ composeEnhancers(applyMiddleware(reduxThunk)));\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n      <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}