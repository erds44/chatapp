(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{297:function(e,t,n){},298:function(e,t,n){},413:function(e,t,n){},420:function(e,t,n){},421:function(e,t,n){},422:function(e,t,n){},423:function(e,t,n){},424:function(e,t,n){},719:function(e,t,n){"use strict";n.r(t);var s=n(5),a=n(0),r=n(17),i=n.n(r),c=(n(297),n(298),n(103)),o=n(36),l=n(1),d=n(7),j=n(129),u=n(721),b=n(726),h=n(725),m=n(63),O=n(722),p=n(293),f=n(731),x=n(734),g={labelCol:{span:8},wrapperCol:{span:16}},y={required:"${label} is required!"},v=function(e){for(var t=[],n=j.a.Option,r=e.visible,i=e.setVisible,c=Object(a.useState)(!0),o=Object(d.a)(c,2),b=o[0],O=o[1],v=1;v<10;v++)t.push(Object(s.jsx)(n,{children:"Interest "+v},v));return Object(s.jsxs)(p.a,{placement:"rightTop",title:"Create Room",content:Object(s.jsxs)(u.a,Object(l.a)(Object(l.a)({},g),{},{name:"nest-messages",onFinish:function(e){S.send(JSON.stringify({command:"createRoom",body:{name:e.name,interests:e.interest}})),i(!1)},validateMessages:y,style:{outerWidth:"500"},children:[Object(s.jsx)(u.a.Item,{name:"name",label:"Name",rules:[{required:!0}],children:Object(s.jsx)(h.a,{})}),Object(s.jsx)(u.a.Item,{name:"switch",label:"Private",valuePropName:"checked",children:Object(s.jsx)(f.a,{onClick:function(){O((function(e){return!e}))}})}),Object(s.jsx)(u.a.Item,{name:"interest",label:"Interests",children:Object(s.jsx)(j.a,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"Please select",disabled:b,children:t})}),Object(s.jsx)(u.a.Item,{wrapperCol:Object(l.a)(Object(l.a)({},g.wrapperCol),{},{offset:8}),children:Object(s.jsx)(m.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})),trigger:"click",visible:r,onVisibleChange:function(e){i(e)},children:[Object(s.jsx)("span",{children:Object(s.jsx)(x.a,{})}),"Create"]})},S=new WebSocket("ws://localhost:4567/chatapp"),R=n(69),C={labelCol:{span:4},wrapperCol:{span:20}},I={required:"${label} is required!"},M=Object(R.b)((function(e,t){return{logIn:e.login}}),{})((function(e){for(var t=Object(o.f)(),n=j.a.Option,r=[],i=[],c=["Traveling","Reading","Music","Sports","Movies","Games"],p=["Rice University","Duke University","USC","UCLA","New York University","Other"],f=(e.dispatch,e.logIn),x=u.a.useForm(),g=(Object(d.a)(x,1)[0].validateFields,0);g<p.length;g++)i.push(Object(s.jsx)(n,{children:p[g]},g));for(var y=0;y<c.length;y++)r.push(Object(s.jsx)(n,{children:c[y]},y));return Object(a.useEffect)((function(){null!==f.isSignedIn&&(!0===f.isSignedIn?t.push("/chat"):b.b.error("This user name has been used, please try another one."))}),[f]),Object(s.jsx)(O.a,{title:"Login Chat Index",style:{width:"600px",margin:"80px auto"},headStyle:{fontSize:"30px",backgroundColor:"#d9d9d9"},bodyStyle:{backgroundColor:"#f5f5f5"},children:Object(s.jsxs)(u.a,Object(l.a)(Object(l.a)({},C),{},{name:"nest-messages",onFinish:function(e){console.log(e.user),S.send(JSON.stringify({command:"login",body:{name:e.user.name,school:e.user.school,interests:c}}))},validateMessages:I,children:[Object(s.jsx)(u.a.Item,{name:["user","name"],label:"Name",rules:[{required:!0}],children:Object(s.jsx)(h.a,{placeholder:"Your Name"})}),Object(s.jsxs)(u.a.Item,{name:["user","school"],label:"School",children:[Object(s.jsx)(j.a,{style:{width:"100%",textAlign:"left"},placeholder:"Please select your school",children:i}),Object(s.jsx)("br",{})]}),Object(s.jsxs)(u.a.Item,{name:["user","interests"],label:"Interests",children:[Object(s.jsx)(j.a,{mode:"multiple",allowClear:!0,style:{width:"100%",textAlign:"left"},placeholder:"Please select your interests",children:r}),Object(s.jsx)("br",{})]}),Object(s.jsx)(u.a.Item,{wrapperCol:Object(l.a)(Object(l.a)({},C.wrapperCol),{},{offset:20}),children:Object(s.jsx)(m.a,{type:"primary",htmlType:"submit",size:"large",children:"Login"})})]}))})})),w=n(720),k=n(113),N=n(66),U=n(728),E=n(729),L=n(730),A=(n(412),n(413),["#355ca9","#2196f2","#5571bc","#fe5722","#43555f","#8665b6","#009688","#febf0a","#e81f63","#06a9f3","#03bcd3","#fe9800","#feea3b","#ccdb3a","#8bc24b","#4baf50","#22828d","#3f51b5","#9c26b0","#673ab7","#607d8b","#9e9e9e","#795548"]),T=[].concat(A),J={},P=function(e){return J[e]||(J[e]=function(){var e=T.shift();return e||(e=(T=[].concat(A)).shift()),e}()),J[e]},X=function(e){var t=e.message,n=(e.currentUser,e.onMessageRecall,e.onMessageDelete),a=(e.onMessageEdit,t.id),r=t.text,i=t.time,c=t.sender,o=Object(s.jsxs)(U.a,{onClick:function(e){if(e&&e.key)switch(e.key){case"edit":break;case"delete":n(a)}},children:[["edit","delete","recall"].map((function(e){return Object(s.jsx)(U.a.Item,{children:e},e)})),!1]});return Object(s.jsxs)(k.a,{children:[Object(s.jsx)(N.a,{span:1,className:"avatar-container",children:Object(s.jsx)(E.a,{style:{backgroundColor:P(c),verticalAlign:"middle"},size:"large",gap:1,children:function(e){return e.split(" ").map((function(e){return e[0]}))}(c)})}),Object(s.jsx)(N.a,{span:23,children:Object(s.jsxs)(k.a,{className:"".concat(null!==a&&void 0!==a?a:""," message-wrapper"),onMouseEnter:function(){var e=document.getElementById("".concat(a,"-dropdown"));e&&(e.style.visibility="visible",e.style.opacity="1")},onMouseLeave:function(){var e=document.getElementById("".concat(a,"-dropdown"));e&&(e.style.visibility="hidden",e.style.opacity="0")},children:[Object(s.jsxs)(N.a,{span:22,children:[Object(s.jsxs)(k.a,{className:"message-header",children:[Object(s.jsx)(N.a,{className:"message-sender",children:c}),Object(s.jsx)(N.a,{className:"message-time",children:i})]}),Object(s.jsx)(k.a,{children:Object(s.jsx)(N.a,{className:"message-text",children:r})})]}),Object(s.jsx)(N.a,{span:2,id:"".concat(a,"-dropdown"),className:"message-dropdown",children:Object(s.jsx)(L.a,{overlay:o,placement:"bottomLeft",children:Object(s.jsx)(m.a,{children:"..."})})})]})})]})},q=(n(420),function(e){var t=e.inputMessages,n=e.onMessageDelete,r=Object(a.useState)(t),i=Object(d.a)(r,2),c=i[0],o=i[1];return Object(a.useEffect)((function(){t&&o(t)}),[t]),Object(s.jsx)("article",{id:"chat-messages",children:c&&c.map((function(e){return Object(s.jsx)(k.a,{className:"message",children:Object(s.jsx)(X,{message:e,onMessageDelete:n})})}))})}),D=(n(421),h.a.TextArea),F=function(e){e.messageForEdit;var t=e.handleMessageSend,n=function(e){t(e)};return Object(s.jsxs)("div",{id:"compose",children:[Object(s.jsx)(k.a,{children:Object(s.jsx)(D,{className:"textarea",rows:4,showCount:!0,onPressEnter:n})}),Object(s.jsx)(k.a,{children:Object(s.jsx)(N.a,{span:3,offset:21,children:Object(s.jsx)(m.a,{onClick:n,children:"Send"})})})]})},_=(n(422),n(423),w.a.Content),z=w.a.Footer,V=(w.a.Header,function(e){var t=e.inputMessages,n=e.chatRoom,r=e.onMessageDelete,i=Object(a.useState)(t),c=Object(d.a)(i,2),o=c[0],l=c[1];Object(a.useEffect)((function(){t&&l(t)}),[t]);return Object(s.jsx)("div",{id:"chat-area",children:Object(s.jsxs)(w.a,{children:[Object(s.jsx)(_,{children:Object(s.jsx)(q,{inputMessages:o,onMessageDelete:function(e){r(e,n)}})}),Object(s.jsx)(z,{children:Object(s.jsx)(F,{})})]})})}),W=n(724),Y=n(732),Z=n(735),B=U.a.SubMenu,G=function(e){var t=e.joinedRooms,n=e.userList,a=e.setReport;return Object(s.jsx)(U.a,{mode:"inline",selectedKeys:[""],children:Object(s.jsx)(B,{title:Object(s.jsxs)("span",{children:[Object(s.jsx)(Z.a,{}),Object(s.jsx)("span",{children:"Joined Rooms"})]}),children:t.map((function(e,r){return Object(s.jsx)(B,{title:e,children:n[r].map((function(e){var i=n[r][0]===e?"magenta":"green",c=n[r][0]===e?"Admin":"Member";return Object(s.jsxs)(U.a.Item,{children:[Object(s.jsx)(Y.a,{color:i,children:c}),e,Object(s.jsx)(m.a,{type:"text",danger:!0,onClick:function(){var n;n=t[r],a({visible:!0,reportRoom:n,reportName:e})},children:"!"})]},e)}))},e)}))})})},H=n(736),K=U.a.SubMenu,$=function(e){var t=e.joinedRooms;return Object(s.jsx)(U.a,{mode:"inline",onClick:function(e){var t;t=e,S.send(JSON.stringify({command:"exitRoom",body:{name:t.key}}))},children:Object(s.jsx)(K,{title:Object(s.jsxs)("span",{children:[Object(s.jsx)("span",{children:Object(s.jsx)(H.a,{})}),"Exit"]}),children:t.map((function(e){return Object(s.jsx)(U.a.Item,{children:e},e)}))})})},Q=n(737),ee=function(){return Object(s.jsx)(U.a,{mode:"inline",selectedKeys:[""],onClick:function(){S.send(JSON.stringify({command:"exitAllRoom",body:{}}))},children:Object(s.jsxs)(U.a.Item,{children:[Object(s.jsx)("span",{children:Object(s.jsx)(Q.a,{})}),"Exit All"]})})},te=U.a.SubMenu,ne=function(e){var t=e.allRooms;return Object(s.jsx)(U.a,{mode:"inline",onClick:function(e){var t;t=e,S.send(JSON.stringify({command:"joinRoom",body:{name:t.key.replace(" ","")}}))},children:Object(s.jsx)(te,{title:Object(s.jsxs)("span",{children:[Object(s.jsx)(Z.a,{}),Object(s.jsx)("span",{children:"All Rooms"})]}),children:t.map((function(e){return Object(s.jsx)(U.a.Item,{children:e},e)}))},"allRooms")})},se=n(727),ae=(n(424),["Sexual Content","Violent or repulsive content","Spam or misleading"]),re=function(e){var t=Object(a.useState)(void 0),n=Object(d.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(""),o=Object(d.a)(c,2),j=o[0],u=o[1],b=Object(a.useState)(!0),m=Object(d.a)(b,2),O=m[0],p=m[1],f=e.report,x=e.setReport;return Object(s.jsx)("div",{children:Object(s.jsxs)(W.a,{title:"Report",visible:f.visible,onOk:function(){x(Object(l.a)(Object(l.a)({},f),{},{visible:!1})),S.send(JSON.stringify({command:"report",body:{reportedUsername:f.reportName,reportedReason:j,reportedRoom:f.reportRoom}}))},onCancel:function(){x(Object(l.a)(Object(l.a)({},f),{},{visible:!1}))},okButtonProps:{disabled:O},children:[Object(s.jsx)("p",{children:"Please Choose Your Reasons"}),Object(s.jsxs)(se.a.Group,{class:"radio-group",onChange:function(e){console.log("radio checked",e.target.value),p(!1),i(e.target.value),3!==e.target.value&&u(ae[e.target.value])},value:r,children:[Object(s.jsx)(se.a,{class:"radio-option",value:0,children:ae[0]}),Object(s.jsx)(se.a,{class:"radio-option",value:1,children:ae[1]}),Object(s.jsx)(se.a,{class:"radio-option",value:2,children:ae[2]}),Object(s.jsxs)(se.a,{class:"radio-option",value:3,children:["More...",3===r?Object(s.jsx)(h.a,{style:{width:100,marginLeft:10},onChange:function(e){console.log("input",e.target.value),3===r&&u(e.target.value)}}):null]})]})]})})},ie=Object(R.b)((function(e,t){return{reportStore:e.report}}),{})((function(e){var t=e.reportStore,n=t.isReportAdminVisible,r=t.reportedReason,i=t.reportedUsername,c=Object(a.useState)(!1),o=Object(d.a)(c,2),l=o[0],j=o[1];Object(a.useEffect)((function(){j(n)}),[e.reportStore]);return Object(s.jsx)("div",{children:Object(s.jsxs)(W.a,{title:"Handle Report Message",visible:l,onOk:function(e){j(!1)},onCancel:function(e){j(!1)},okText:"Approve",cancelText:"Disapprove",children:[Object(s.jsxs)("p",{children:["Reported User: ",i]}),Object(s.jsx)("p",{children:r})]})})})),ce=Object(R.b)((function(e,t){return{room:e.room}}),{})((function(e){var t=e.room,n=Object(a.useState)((function(){return[]})),r=Object(d.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)((function(){return[[]]})),l=Object(d.a)(o,2),j=l[0],u=l[1],b=Object(a.useState)((function(){return[]})),h=Object(d.a)(b,2),m=h[0],O=h[1],p=Object(a.useState)(!1),f=Object(d.a)(p,2),x=f[0],g=f[1],y=(Object(a.useMemo)((function(){return m}),[m]),Object(a.useMemo)((function(){return i}),[i]),Object(a.useMemo)((function(){return j}),[j]),Object(a.useState)({visible:!1,reportRoom:null,reportName:null})),S=Object(d.a)(y,2),R=S[0],C=S[1];return Object(a.useEffect)((function(){null==t.msg?(c((function(e){return t.joinedRoom})),u((function(){return t.userList})),O((function(){return t.allRooms}))):"err"===t.type?W.a.error({content:t.msg}):W.a.success({content:t.msg})}),[t]),Object(s.jsxs)(U.a,{mode:"inline",onClick:function(e){"create"===e.key&&g(!0)},selectedKeys:[""],children:[Object(s.jsx)(U.a.Item,{children:Object(s.jsx)(v,{visible:x,setVisible:g})},"create"),Object(s.jsx)($,{joinedRooms:i}),Object(s.jsx)(ee,{}),Object(s.jsx)(G,{joinedRooms:i,userList:j,setReport:C}),Object(s.jsx)(ne,{allRooms:m}),Object(s.jsx)(re,{report:R,setReport:C}),Object(s.jsx)(ie,{})]})})),oe=n(723),le=n(733),de=function(){var e=Object(s.jsxs)(le.b,{align:"center",children:[Object(s.jsx)(h.a,{placeholder:"Username"}),Object(s.jsx)(m.a,{type:"primary",children:"Invite"})]});return Object(s.jsx)(p.a,{content:e,title:"Invite your friend!",trigger:"click",children:Object(s.jsx)(m.a,{children:"Invite"})})},je=function(){var e=["#f56a00","#7265e6","#ffbf00","#00a2ae"];return Object(s.jsxs)("div",{children:[Object(s.jsx)(oe.b,{itemLayout:"horizontal",dataSource:[{name:{title:"Miss",first:"Weiwei",last:"Zhou"},school:"Rice University",interest:"Reading"},{name:{title:"Mr",first:"Xiao",last:"Xia"},school:"Rice University",interest:"Sports"},{name:{title:"Mr",first:"Zhijian",last:"Yao"},school:"Rice University",interest:"Traveling"},{name:{title:"Mr",first:"Xuyang",last:"Xiao"},school:"Rice University",interest:"Sports"},{name:{title:"Mr",first:"Wenlong",last:"Yan"},school:"Rice University",interest:"Sports"},{name:{title:"Miss",first:"Xinru",last:"Xiao"},school:"Rice University",interest:"Sports"}],renderItem:function(t){return Object(s.jsxs)(oe.b.Item,{style:{padding:"15px"},children:[Object(s.jsx)(oe.b.Item.Meta,{avatar:Object(s.jsx)(E.a,{style:{backgroundColor:e[Math.floor(5*Math.random())],verticalAlign:"middle"},size:"large",gap:4,children:t.name.first[0]}),description:t.name.first+" "+t.name.last,title:t.school}),Object(s.jsx)(m.a,{type:"primary",shape:"round",size:"small",onClick:function(){return alert("to complete")},children:"Chat!"})]})}}),de()]})},ue=w.a.Header,be=w.a.Content,he=w.a.Footer,me=w.a.Sider,Oe=function(e){var t=Object(o.f)(),n=Object(a.useState)({"Chat Room 1":[{id:1,sender:"Xiao Xia",text:"This is the first message for chat room 1",time:"2020-10-29 08:00:00"},{id:2,sender:"Zhijian Yao",text:"This is the second message for chat room 1",time:"2020-10-29 08:05:00"},{id:3,sender:"Weiwei Zhou",text:"This is the third message for chat room 1",time:"2020-10-29 08:15:30"}]}),r=Object(d.a)(n,2),i=r[0],c=r[1],j="Chat Room 1";return Object(s.jsxs)(w.a,{style:{height:"100vh"},children:[Object(s.jsx)(me,{width:"300px",theme:"light",children:Object(s.jsx)(ce,{})}),Object(s.jsxs)(w.a,{children:[Object(s.jsxs)(ue,{style:{padding:0,backgroundColor:"white",borderLeft:"2px solid rgba(0, 0, 0, 0.06)"},children:[Object(s.jsx)("span",{id:"chat-area-header-room-name",style:{fontSize:"larger",fontWeight:"bolder"},children:j}),Object(s.jsx)("span",{id:"chat-area-header-user-count",style:{fontSize:"medium"},children:"  (".concat(["Xiao Xia","Zhijian Yao","Weiwei Zhou"].length,")")}),Object(s.jsx)(m.a,{style:{right:"-500px"},type:"primary",shape:"round",size:"small",onClick:function(){t.push("/")},children:"Logout"})]}),Object(s.jsx)(be,{style:{margin:"24px 16px 0"},children:Object(s.jsxs)(k.a,{style:{height:"100%"},children:[Object(s.jsx)(N.a,{span:17,children:Object(s.jsx)("div",{className:"site-layout-background",style:{minHeight:360,height:"100%"},children:Object(s.jsx)(V,{inputMessages:i["Chat Room 1"],chatRoom:j,onMessageDelete:function(e,t){i[t]=i[t].filter((function(t){return t.id!==e})),c(Object(l.a)({},i))}})})}),Object(s.jsx)(N.a,{span:7,style:{borderLeft:"2px solid rgba(0, 0, 0, 0.06)"},children:je()})]})}),Object(s.jsx)(he,{style:{textAlign:"center"},children:"Chat App \xa92020 Created by Summy the Owl"})]})]})},pe=n(283),fe=(n(203),"SIGN_IN"),xe="SIGN_OUT",ge="ON_MESSAGE",ye="ROOM",ve="ON_REPORT",Se=Object(pe.a)(),Re=Object(R.b)((function(e,t){return{message:e.message}}),{onMessage:function(e){return function(t){var n=JSON.parse(e.data);switch(n.section){case"login":t({type:fe,payload:{isSignedIn:!0}});break;case"room":t({type:ye,payload:{request:n.request,type:n.type,msg:n.msg,param1:n.param1,param2:n.param2,param3:n.param3}});break;case"report":var s=JSON.parse(n.msg);t({type:ve,payload:{reportedUsername:s.reportedUsername,reportedReason:s.reportedReason}})}}}})((function(e){e.dispatch,e.message;return S.onopen=function(){console.log("connected")},S.onmessage=function(t){console.log(t),e.onMessage(t)},Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(c.a,{history:Se,children:Object(s.jsxs)(o.c,{children:[Object(s.jsx)(o.a,{path:"/",exact:!0,component:M}),Object(s.jsx)(o.a,{path:"/chat",exact:!0,component:Oe})]})})})})),Ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,738)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),s(e),a(e),r(e),i(e)}))},Ie=n(91),Me=n(284),we={isSignedIn:null,user:null,mesId:0},ke=(n(440),{request:null,type:null,msg:null,joinedRoom:[],userList:[[]],allRooms:[]}),Ne=function(e){if(e)return console.log("parse: "+e),JSON.parse(e)},Ue=function(e,t){if(console.log("before: "+t),t){for(var n=JSON.parse(e).length,s=[],a=t.substring(1,t.length-1),r=0;r<n;r++){var i=a.indexOf("["),c=a.indexOf("]"),o=a.substring(i+1,c).split(",");s.push(o),a=a.substring(c+1)}return console.log("after: "+s),s}},Ee={isReportAdminVisible:!1,reportedUsername:"",reportedReason:""},Le=Object(Ie.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return!0===t.payload.isSignedIn?Object(l.a)(Object(l.a)({},e),{},{isSignedIn:!0,user:t.payload.user,mesId:t.payload.mesId}):Object(l.a)(Object(l.a)({},e),{},{isSignedIn:!1,user:null,mesId:t.payload.mesId});case xe:return Object(l.a)(Object(l.a)({},e),{},{isSignedIn:null,user:null,mesId:t.payload.mesId});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return Object(l.a)(Object(l.a)({},e),{},{messages:t.payload.data});default:return e}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type,e},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye:return{request:t.payload.request,type:t.payload.type,msg:t.payload.msg,joinedRoom:Ne(t.payload.param1),userList:Ue(t.payload.param1,t.payload.param2),allRooms:Ne(t.payload.param3)};default:return e}},report:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(l.a)(Object(l.a)({},e),{},{isReportAdminVisible:!0,reportedReason:t.payload.reportedReason,reportedUsername:t.payload.reportedUsername});default:return e}}}),Ae=(n(718),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ie.d),Te=Object(Ie.e)(Le,Ae(Object(Ie.a)(Me.a)));i.a.render(Object(s.jsx)(R.a,{store:Te,children:Object(s.jsx)(Re,{})}),document.getElementById("root")),Ce()}},[[719,1,2]]]);
//# sourceMappingURL=main.e22137f1.chunk.js.map